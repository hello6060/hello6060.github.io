<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hello</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hello">
<meta property="og:url" content="http://www.ljh.xyz/page/2/index.html">
<meta property="og:site_name" content="Hello">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="LJH">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hello" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hello</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="æœç´¢"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.ljh.xyz"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-ç”¨KVMéƒ¨ç½²è™šæ‹Ÿæœº" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/04/%E7%94%A8KVM%E9%83%A8%E7%BD%B2%E8%99%9A%E6%8B%9F%E6%9C%BA/" class="article-date">
  <time datetime="2020-08-04T08:31:18.000Z" itemprop="datePublished">2020-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/04/%E7%94%A8KVM%E9%83%A8%E7%BD%B2%E8%99%9A%E6%8B%9F%E6%9C%BA/">ç”¨KVMéƒ¨ç½²è™šæ‹Ÿæœº</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ç”¨KVMéƒ¨ç½²è™šæ‹Ÿæœº"><a href="#ç”¨KVMéƒ¨ç½²è™šæ‹Ÿæœº" class="headerlink" title="ç”¨KVMéƒ¨ç½²è™šæ‹Ÿæœº"></a>ç”¨KVMéƒ¨ç½²è™šæ‹Ÿæœº</h1><h2 id="çŸ¥è¯†æ‰«ç›²"><a href="#çŸ¥è¯†æ‰«ç›²" class="headerlink" title="çŸ¥è¯†æ‰«ç›²"></a>çŸ¥è¯†æ‰«ç›²</h2><blockquote>
<p>KVMï¼ˆKernel-basedVirtualMachineï¼‰æ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶ï¼ŒåŸºäºå†…æ ¸çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå®é™…æ˜¯åµŒå…¥ç³»ç»Ÿçš„ä¸€ä¸ªè™šæ‹ŸåŒ–æ¨¡å—ï¼Œé€šè¿‡ä¼˜åŒ–å†…æ ¸æ¥ä½¿ç”¨è™šæ‹ŸæŠ€æœ¯ï¼Œè¯¥å†…æ ¸æ¨¡å—ä½¿å¾—Linuxå˜æˆäº†ä¸€ä¸ªHypervisorï¼Œè™šæ‹Ÿæœºä½¿ç”¨Linuxè‡ªèº«çš„è°ƒåº¦å™¨è¿›è¡Œç®¡ç†ã€‚ä½†æ˜¯ï¼ŒKVMæœ¬èº«ä¸æ‰§è¡Œä»»ä½•ç¡¬ä»¶æ¨¡æ‹Ÿï¼Œéœ€è¦å®¢æˆ·ç©ºé—´ç¨‹åºé€šè¿‡/dev/kvmæ¥å£è®¾ç½®ä¸€ä¸ªå®¢æˆ·æœºè™šæ‹ŸæœåŠ¡å™¨çš„åœ°å€ç©ºé—´ï¼Œå‘å®ƒæä¾›æ¨¡æ‹Ÿçš„I/Oï¼Œå¹¶å°†å®ƒçš„è§†é¢‘æ˜¾ç¤ºæ˜ å°„å›å®¿ä¸»çš„æ˜¾ç¤ºå±ã€‚ç›®å‰è¿™ä¸ªåº”ç”¨ç¨‹åºæ˜¯QEMUã€‚</p>
</blockquote>
<blockquote>
<p>${var:+string} è§„åˆ™å’Œ${var:-string},${var:=string}çš„å®Œå…¨ç›¸å å³åªæœ‰å½“varä¸æ˜¯ç©ºçš„æ—¶å€™æ‰æ›¿æ¢æˆstring,è‹¥varä¸ºç©ºæ—¶åˆ™ä¸æ›¿æ¢æˆ–è€…è¯´æ˜¯æ›¿æ¢æˆå˜é‡varçš„å€¼,å³ç©ºå€¼</p>
</blockquote>
<blockquote>
<p>Libvirt æ˜¯ä¸€ç»„è½¯ä»¶çš„æ±‡é›†ï¼Œæä¾›äº†ç®¡ç†è™šæ‹Ÿæœºå’Œå…¶å®ƒè™šæ‹ŸåŒ–åŠŸèƒ½ï¼ˆå¦‚ï¼šå­˜å‚¨å’Œç½‘ç»œæ¥å£ç­‰ï¼‰çš„ä¾¿åˆ©é€”å¾„ã€‚è¿™äº›è½¯ä»¶åŒ…æ‹¬ï¼šä¸€ä¸ªé•¿æœŸç¨³å®šçš„ C è¯­è¨€ APIã€ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼ˆlibvirtdï¼‰å’Œä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼ˆvirshï¼‰</p>
</blockquote>
<blockquote>
<p>KVMå†…æ ¸æ¨¡å—æœ¬èº«åªèƒ½æä¾›CPUå’Œå†…å­˜çš„è™šæ‹ŸåŒ–ï¼Œæ‰€ä»¥å®ƒå¿…é¡»ç»“åˆQEMUæ‰èƒ½æ„æˆä¸€ä¸ªå®Œæˆçš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œè¿™å°±æ˜¯ä¸‹é¢è¦è¯´çš„qemu-kvmã€‚</p>
</blockquote>
<blockquote>
<p>libvirtæ˜¯ç›®å‰ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„å¯¹KVMè™šæ‹Ÿæœºè¿›è¡Œç®¡ç†çš„å·¥å…·å’ŒAPIã€‚Libvirtdæ˜¯ä¸€ä¸ªdaemonè¿›ç¨‹ï¼Œå¯ä»¥è¢«æœ¬åœ°çš„virshè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è¢«è¿œç¨‹çš„virshè°ƒç”¨ï¼ŒLibvirtdè°ƒç”¨qemu-kvmæ“ä½œè™šæ‹Ÿæœºã€‚</p>
<p>virsh virt-manager virt-viewer virt-install other-toolsæ˜¯libvirtç”¨æˆ·æ€çš„å·¥å…·</p>
</blockquote>
<h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p><a target="_blank" rel="noopener" href="https://blog.51cto.com/changfei/1672147">qemu-kvm-libvirtdä¸‰è€…å…³ç³»</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/fang9045315/p/8966107.html">QEMU/KVMç½‘ç»œæ¨¡å¼(äºŒ)â€”â€”NAT-åˆ›å»ºqemu-ifup-natè„šæœ¬</a></p>
<p><a target="_blank" rel="noopener" href="https://handerfly.github.io/shell/2019/04/03/shell%E7%BC%96%E7%A8%8B%E5%86%92%E5%8F%B7%E5%8A%A0-%E7%AD%89%E5%8F%B7-%E5%8A%A0%E5%8F%B7-%E5%87%8F%E5%8F%B7-%E9%97%AE%E5%8F%B7/">*shell ç¼–ç¨‹ï¼šå†’å· åé¢è·Ÿ ç­‰å·ï¼ŒåŠ å·ï¼Œå‡å·ï¼Œé—®å·çš„æ„ä¹‰</a></p>
<p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Libvirt_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">libvirt ä»‹ç»(ç®€ä½“ä¸­æ–‡)</a></p>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul>
<li>é…ç½®yumæº</li>
<li>å®‰è£…é•œåƒ(è¿™é‡Œä½¿ç”¨CentOS-7-x86_64-DVD-1511.isoé•œåƒ)</li>
<li>å…³é—­é˜²ç«å¢™, æ¸…ç©ºè§„åˆ™</li>
</ul>
<h2 id="é…ç½®éƒ¨ç½²ç¯å¢ƒ"><a href="#é…ç½®éƒ¨ç½²ç¯å¢ƒ" class="headerlink" title="é…ç½®éƒ¨ç½²ç¯å¢ƒ"></a>é…ç½®éƒ¨ç½²ç¯å¢ƒ</h2><p>å¼€å¯CPUè™šæ‹ŸåŒ–</p>
<p><img src="http://img.ljh666.xyz/img/20200804145837.png"></p>
<p>æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–ï¼š<br>Intel CPUï¼šcat /proc/cpuinfo |grep â€“color vmx<br>AMD CPUï¼šcat /proc/cpuinfo |grep â€“color smv</p>
<p><img src="http://img.ljh666.xyz/img/20200804145932.png"></p>
<h2 id="å®‰è£…å·¥å…·"><a href="#å®‰è£…å·¥å…·" class="headerlink" title="å®‰è£…å·¥å…·"></a>å®‰è£…å·¥å…·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libvirt qemu-kvm virt-install openssl</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹kvmå®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# lsmod | grep kvm </span><br><span class="line">kvm_intel             162153  0 </span><br><span class="line">kvm                   525259  1 kvm_intel</span><br></pre></td></tr></table></figure>

<h2 id="è™šæ‹Ÿæœºç¯å¢ƒ"><a href="#è™šæ‹Ÿæœºç¯å¢ƒ" class="headerlink" title="è™šæ‹Ÿæœºç¯å¢ƒ"></a>è™šæ‹Ÿæœºç¯å¢ƒ</h2><p>å¯ç”¨libvirtd</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start libvirtd</span><br><span class="line">systemctl enable libvirtd</span><br></pre></td></tr></table></figure>

<p>é…ç½®ç½‘ç»œç¯å¢ƒ</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/gsl371/article/details/78662258">KVMçš„å››ç§ç½‘ç»œæ¨¡å¼</a></p>
<p>NATæ¨¡å¼:</p>
<p><img src="http://img.ljh666.xyz/img/20200804151151.png"></p>
<p>DNSå’ŒDHCP<br>IPåœ°å€å¯ä»¥é€šè¿‡DHCPåˆ†é…ç»™å®¢æˆ·æœºã€‚ä¸ºæ­¤ï¼Œå¯ä»¥å°†åœ°å€æ± åˆ†é…ç»™è™šæ‹Ÿç½‘ç»œäº¤æ¢æœºã€‚Libvirtä½¿ç”¨è¿™ä¸ªdnsmasqç¨‹åºã€‚dnsmasqçš„ä¸€ä¸ªå®ä¾‹æ˜¯ç”±libvirtä¸ºæ¯ä¸ªéœ€è¦å®ƒçš„è™šæ‹Ÿç½‘ç»œäº¤æ¢æœºè‡ªåŠ¨é…ç½®å’Œå¯åŠ¨çš„ã€‚</p>
<p><img src="http://img.ljh666.xyz/img/20200804151312.png"></p>
<p>æ¡¥æ¥æ¨¡å¼:</p>
<p><img src="http://img.ljh666.xyz/img/20200804151417.png"></p>
<p>KVMé»˜è®¤å¯åŠ¨è™šæ‹Ÿæœºæ—¶å€™é»˜è®¤ä½¿ç”¨NATæ¨¡å¼, è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯æ¡¥æ¥æ¨¡å¼</p>
<h3 id="å¼€å§‹é…ç½®ç½‘æ¡¥"><a href="#å¼€å§‹é…ç½®ç½‘æ¡¥" class="headerlink" title="å¼€å§‹é…ç½®ç½‘æ¡¥"></a>å¼€å§‹é…ç½®ç½‘æ¡¥</h3><p>è¯´æ˜: åˆ›å»ºbr0ç½‘æ¡¥å¹¶é…ç½®é™æ€IPåœ°å€(ä½†vmwareä¸­ç½‘å¡æ¨¡å¼ä¸ºNATæ—¶, è¿˜å¯ä»¥é€šè¿‡dhcpè·å–åˆ°åœ°å€, è¿™é‡Œç”¨çš„æ˜¯ä»…ä¸»æœºæ¨¡å¼ä¸”å…³é—­äº†dhcpæ¨¡å¼, åªèƒ½é…ç½®é™æ€ipåœ°å€),  å°†åŸæ¥ä¸»æœºçš„eno16777736æ–‡ä»¶æŒ‡å‘br0ç½‘æ¡¥, å¦åˆ™ä¸»æœºæ²¡æœ‰IPåœ°å€äº†. åˆ©ç”¨ä¸Šé¢çš„ç½‘æ¡¥, å°±å¯ä»¥é€šè¿‡æŒ‡å‘br0ç½‘æ¡¥, ä»è€Œä½¿ç”¨å®¿ä¸»æœºçš„ipåœ°å€è®¿é—®åˆ°kvmåˆ›å»ºå‡ºæ¥çš„è™šæ‹Ÿæœº</p>
<p>å¤‡ä»½ç½‘å¡é…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;</span><br><span class="line">[root@localhost network-scripts]# cp ifcfg-eno16777736 &#x2F;root&#x2F;bak&#x2F;</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºbr0ç½‘æ¡¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ifcfg-eno16777736 ifcfg-br0</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost network-scripts]# vim ifcfg-br0     </span><br><span class="line"></span><br><span class="line">BOOTPROTO&#x3D;static</span><br><span class="line">DEVICE&#x3D;br0</span><br><span class="line">TYPE&#x3D;Bridge</span><br><span class="line">IPADDR&#x3D;10.10.10.101</span><br><span class="line">NETMASK&#x3D;255.255.255.0</span><br></pre></td></tr></table></figure>

<p>é…ç½®åŸç½‘å¡é…ç½®æ–‡ä»¶eno16777736</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost network-scripts]# vim ifcfg-eno16777736 </span><br><span class="line"></span><br><span class="line">TYPE&#x3D;Ethernet</span><br><span class="line">NAME&#x3D;eno16777736</span><br><span class="line">DEVICE&#x3D;eno16777736</span><br><span class="line">ONBOOT&#x3D;yes</span><br><span class="line">NM_CONTROTO&#x3D;none</span><br><span class="line">BRIDGE&#x3D;&quot;br0&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure>

<p>æ£€æŸ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost network-scripts]# ifconfig                                                </span><br><span class="line">br0: flags&#x3D;4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 10.10.10.101  netmask 255.255.255.0  broadcast 10.10.10.255</span><br><span class="line">        inet6 fe80::20c:29ff:fe9d:7ebc  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:9d:7e:bc  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 10567  bytes 2241944 (2.1 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 3821  bytes 597679 (583.6 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">eno16777736: flags&#x3D;4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        ether 00:0c:29:9d:7e:bc  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 16076  bytes 2807230 (2.6 MiB)</span><br><span class="line">        RX errors 0  dropped 14  overruns 0  frame 0</span><br><span class="line">        TX packets 3850  bytes 632393 (617.5 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">eno33554960: flags&#x3D;4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 100.100.100.121  netmask 255.255.255.0  broadcast 100.100.100.255</span><br><span class="line">        inet6 fe80::20c:29ff:fe9d:7ec6  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:9d:7e:c6  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 2993  bytes 3933002 (3.7 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 935  bytes 65604 (64.0 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags&#x3D;73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 0  (Local Loopback)</span><br><span class="line">        RX packets 87  bytes 9792 (9.5 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 87  bytes 9792 (9.5 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">virbr0: flags&#x3D;4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255</span><br><span class="line">        ether 00:00:00:00:00:00  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­virbr0å°±æ˜¯é»˜è®¤åˆ›å»ºçš„è™šæ‹Ÿæœºä½¿ç”¨çš„ç½‘æ¡¥, è¿™å’Œæœ¬å®éªŒæ— å…³, ç”¨ä¸åˆ°</p>
<h3 id="å‡†å¤‡è™šæ‹Ÿæœºèµ„æº"><a href="#å‡†å¤‡è™šæ‹Ÿæœºèµ„æº" class="headerlink" title="å‡†å¤‡è™šæ‹Ÿæœºèµ„æº"></a>å‡†å¤‡è™šæ‹Ÿæœºèµ„æº</h3><p>åˆ›å»ºå­˜æ”¾kvmè™šæ‹Ÿæœºçš„æ–‡ä»¶å¤¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;opt&#x2F;kvmData</span><br></pre></td></tr></table></figure>

<p>ä¸Šä¼ ç”¨äºå®‰è£…çš„é•œåƒ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost opt]# ls</span><br><span class="line">CentOS-7-x86_64-DVD-1511.iso  kvmData</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»º-å®‰è£…è™šæ‹Ÿæœº"><a href="#åˆ›å»º-å®‰è£…è™šæ‹Ÿæœº" class="headerlink" title="åˆ›å»º|å®‰è£…è™šæ‹Ÿæœº"></a>åˆ›å»º|å®‰è£…è™šæ‹Ÿæœº</h2><h3 id="åˆ›å»ºè™šæ‹Ÿæœº"><a href="#åˆ›å»ºè™šæ‹Ÿæœº" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿæœº"></a>åˆ›å»ºè™šæ‹Ÿæœº</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virt-install -n kvmVirt-1 -r 1024 --disk &#x2F;opt&#x2F;kvmData&#x2F;kvmVirtData-1.img,format&#x3D;qcow2,size&#x3D;20 --network bridge&#x3D;br0 --os-type&#x3D;linux  --cdrom &#x2F;opt&#x2F;CentOS-7-x86_64-DVD-1511.iso --vnc --vncport&#x3D;5910 --vnclisten&#x3D;0.0.0.0 --check all&#x3D;off</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--name Centos                    ###è™šæ‹Ÿæœºåå­—</span><br><span class="line">--virt-type kvm                  ###è™šæ‹Ÿæœºç±»å‹</span><br><span class="line">--ram 1024                       ###è™šæ‹Ÿæœºå†…å­˜</span><br><span class="line">--cdrom&#x3D;&#x2F;opt&#x2F;CentOS-7.1.iso      ###é•œåƒåœ°å€</span><br><span class="line">--disk path&#x3D;&#x2F;kvmdir&#x2F;test.img     ###è™šæ‹Ÿæœºå®‰è£…ä½ç½®</span><br><span class="line">--network&#x3D;default                ###é»˜è®¤ç½‘ç»œé…ç½®</span><br><span class="line">--graphics vnc,listen&#x3D;0.0.0.0    ###ç›‘å¬æ‰€æœ‰IP</span><br><span class="line">--vcpus 5                        ###å¯ä»¥ä½¿ç”¨cpuä¸ªæ•°</span><br><span class="line">--vcpus 5,maxcpus&#x3D;10             ###å¯ä»¥ä½¿ç”¨5é¢—cpuï¼Œæœ€å¤§æ”¯æŒ10é¢—cpu</span><br></pre></td></tr></table></figure>

<h3 id="è¿æ¥è™šæ‹Ÿæœº"><a href="#è¿æ¥è™šæ‹Ÿæœº" class="headerlink" title="è¿æ¥è™šæ‹Ÿæœº"></a>è¿æ¥è™šæ‹Ÿæœº</h3><p>å®‰è£…VNC Viewer</p>
<p>é€šè¿‡VNC Viewerè¿æ¥è™šæ‹Ÿæœº</p>
<p><img src="http://img.ljh666.xyz/img/20200804155821.png"></p>
<p>è¿æ¥æˆåŠŸ</p>
<p><img src="http://img.ljh666.xyz/img/image-20200804155932078.png"></p>
<p>åé¢çš„å®‰è£…ç•¥</p>
<h2 id="è™šæ‹Ÿæœºç®¡ç†"><a href="#è™šæ‹Ÿæœºç®¡ç†" class="headerlink" title="è™šæ‹Ÿæœºç®¡ç†"></a>è™šæ‹Ÿæœºç®¡ç†</h2><p>æŸ¥çœ‹è™šæ‹Ÿæœº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# virsh list</span><br><span class="line"> Id    Name                           State</span><br><span class="line">----------------------------------------------------</span><br><span class="line"> 6     kvmVirt-1                      running</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤è™šæ‹Ÿæœº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# virsh destroy kvmVirt-1</span><br><span class="line">Domain kvmVirt-1 destroyed</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# virsh undefine kvmVirt-1</span><br><span class="line">Domain kvmVirt-1 has been undefined</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# virsh list</span><br><span class="line"> Id    Name                           State</span><br><span class="line">----------------------------------------------------</span><br></pre></td></tr></table></figure>



<p>è‡³æ­¤, KVMçš„éƒ¨ç½²ä¸è™šæ‹Ÿæœºçš„é…ç½®å·²å®Œæˆ</p>
<p>å¹²æ¯~ğŸ»</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ljh.xyz/2020/08/04/%E7%94%A8KVM%E9%83%A8%E7%BD%B2%E8%99%9A%E6%8B%9F%E6%9C%BA/" data-id="ckkzd08hz000u7ou1ez725uls" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Centos/" rel="tag">Centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%BA%A7/" rel="tag">äº‘è®¡ç®—ä¸­çº§</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-é…ç½®ä¸»ä»DNSæœåŠ¡å™¨" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/02/%E9%85%8D%E7%BD%AE%E4%B8%BB%E4%BB%8EDNS%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  <time datetime="2020-08-02T03:31:18.000Z" itemprop="datePublished">2020-08-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/02/%E9%85%8D%E7%BD%AE%E4%B8%BB%E4%BB%8EDNS%E6%9C%8D%E5%8A%A1%E5%99%A8/">é…ç½®ä¸»ä»DNSæœåŠ¡å™¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="é…ç½®ä¸»ä»DNSæœåŠ¡å™¨"><a href="#é…ç½®ä¸»ä»DNSæœåŠ¡å™¨" class="headerlink" title="é…ç½®ä¸»ä»DNSæœåŠ¡å™¨"></a>é…ç½®ä¸»ä»DNSæœåŠ¡å™¨</h1><h2 id="å®‰è£…ä¸»DNS"><a href="#å®‰è£…ä¸»DNS" class="headerlink" title="å®‰è£…ä¸»DNS"></a>å®‰è£…ä¸»DNS</h2><p>å‚è€ƒ  <a href="%5Bhttp://www.ljh666.xyz/2020/07/31/%E6%90%AD%E5%BB%BADNS%E6%9C%8D%E5%8A%A1%E5%99%A8/%5D(http://www.ljh666.xyz/2020/07/31/%E6%90%AD%E5%BB%BADNS%E6%9C%8D%E5%8A%A1%E5%99%A8/)">æ­å»ºDNSæœåŠ¡å™¨</a></p>
<p>å…¶ä¸­åŒºåŸŸé…ç½®æ–‡ä»¶çš„/etc/named.rfc1912.zonesæ”¹ä¸º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;ljh.com&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.localhost&quot;;</span><br><span class="line">        allow-update &#123; 10.10.10.11; &#125;;    # æ·»åŠ ä»æœåŠ¡å™¨çš„åœ°å€, ä¸¤è¾¹æœ‰ç©ºæ ¼</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;10.10.10.in-addr.arpa&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.loopback&quot;;</span><br><span class="line">        allow-update &#123; 10.10.10.11; &#125;;    # æ·»åŠ ä»æœåŠ¡å™¨çš„åœ°å€, ä¸¤è¾¹æœ‰ç©ºæ ¼</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>é‡å¯ä¸»DNS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart named</span><br></pre></td></tr></table></figure>

<h2 id="å®‰è£…ä»DNS"><a href="#å®‰è£…ä»DNS" class="headerlink" title="å®‰è£…ä»DNS"></a>å®‰è£…ä»DNS</h2><p>ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶</p>
<p>ä¿®æ”¹åŒºåŸŸé…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;localhost.localdomain&quot; IN &#123;</span><br><span class="line">        type slave;</span><br><span class="line">        file &quot;slaves&#x2F;named.localhost&quot;;    &#x2F;&#x2F;æ•°æ®æ–‡ä»¶ä¿å­˜äºslavesæ–‡ä»¶å¤¹ä¸­</span><br><span class="line">        masters &#123; 10.10.10.12; &#125;;</span><br><span class="line">        &#x2F;&#x2F; è¦åˆ é™¤allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;1.0.0.127.in-addr.arpa&quot; IN &#123;</span><br><span class="line">        type slave;</span><br><span class="line">        file &quot;slaves&#x2F;named.loopback&quot;;    &#x2F;&#x2F;æ•°æ®æ–‡ä»¶ä¿å­˜äºslavesæ–‡ä»¶å¤¹ä¸­</span><br><span class="line">        masters &#123; 10.10.10.12; &#125;;</span><br><span class="line">        &#x2F;&#x2F; è¦åˆ é™¤allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>é‡å¯DNS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart named</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥åœ¨ä»æœåŠ¡å™¨æŸ¥çœ‹åˆ°åŒæ­¥çš„æ•°æ®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@DNS2 ~]# ls &#x2F;var&#x2F;named&#x2F;slaves&#x2F;</span><br><span class="line">named.localhost  named.loopback</span><br></pre></td></tr></table></figure>



<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>é…ç½®æµ‹è¯•æœº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@DNS2 ~]# vim &#x2F;etc&#x2F;resolv.conf</span><br><span class="line"># Generated by NetworkManager</span><br><span class="line">search localdomain ljh.com</span><br><span class="line">nameserver 10.10.10.11             # æŒ‡å‘ä»DNSæœåŠ¡å™¨</span><br></pre></td></tr></table></figure>

<p>é‡å¯æµ‹è¯•æœºç½‘ç»œæœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@DNS2 ~]# systemctl restart network</span><br></pre></td></tr></table></figure>

<p>ä½ è¿˜å¯ä»¥ç”¨ä¸ªdigå‘½ä»¤ç›´æ¥æŒ‡å®šDNSæœåŠ¡å™¨, è¿™æ ·å°±ä¸ç”¨ä¿®æ”¹/etc/resolv.confäº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@xserver1 ~]# dig mail.ljh.com @10.10.10.11   </span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.4-P2-RedHat-9.11.4-16.P2.el7_8.6 &lt;&lt;&gt;&gt; mail.ljh.com @10.10.10.11</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 10054</span><br><span class="line">;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 2</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 4096</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;mail.ljh.com.                  IN      A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">mail.ljh.com.           86400   IN      A       10.10.10.12</span><br><span class="line"></span><br><span class="line">;; AUTHORITY SECTION:</span><br><span class="line">ljh.com.                86400   IN      NS      ns.ljh.com.</span><br><span class="line"></span><br><span class="line">;; ADDITIONAL SECTION:</span><br><span class="line">ns.ljh.com.             86400   IN      A       10.10.10.12</span><br><span class="line"></span><br><span class="line">;; Query time: 0 msec</span><br><span class="line">;; SERVER: 10.10.10.11#53(10.10.10.11)</span><br><span class="line">;; WHEN: æ—¥ 8æœˆ 02 19:26:05 CST 2020</span><br><span class="line">;; MSG SIZE  rcvd: 90</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸»ä»DNSé…ç½®å®ŒæˆğŸº</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ljh.xyz/2020/08/02/%E9%85%8D%E7%BD%AE%E4%B8%BB%E4%BB%8EDNS%E6%9C%8D%E5%8A%A1%E5%99%A8/" data-id="ckkzd08i0000w7ou1b16odj57" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Centos/" rel="tag">Centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%BA%A7/" rel="tag">äº‘è®¡ç®—ä¸­çº§</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-å®‰è£…  é…ç½®DHCPæœåŠ¡å™¨" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/01/%E5%AE%89%E8%A3%85%20%20%E9%85%8D%E7%BD%AEDHCP%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  <time datetime="2020-08-01T15:24:18.000Z" itemprop="datePublished">2020-08-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/01/%E5%AE%89%E8%A3%85%20%20%E9%85%8D%E7%BD%AEDHCP%E6%9C%8D%E5%8A%A1%E5%99%A8/">å®‰è£… | é…ç½®DHCPæœåŠ¡å™¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="å®‰è£…-é…ç½®DHCPæœåŠ¡å™¨"><a href="#å®‰è£…-é…ç½®DHCPæœåŠ¡å™¨" class="headerlink" title="å®‰è£… | é…ç½®DHCPæœåŠ¡å™¨"></a>å®‰è£… | é…ç½®DHCPæœåŠ¡å™¨</h1><h2 id="çŸ¥è¯†æ‰«ç›²"><a href="#çŸ¥è¯†æ‰«ç›²" class="headerlink" title="çŸ¥è¯†æ‰«ç›²"></a>çŸ¥è¯†æ‰«ç›²</h2><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul>
<li>ä¸€å°æœåŠ¡å™¨</li>
<li>ä¸€å°å®¢æˆ·æœº</li>
<li>é…ç½®yumæº</li>
</ul>
<h3 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h3><p>å°†æœåŠ¡å™¨å’Œå®¢æˆ·æœºæ”¾åœ¨åŒä¸€ä¸ªLANå†…(å±€åŸŸç½‘å†…), è¿™é‡Œä¸¤å°æœºå™¨æˆ‘éƒ½ä½¿ç”¨ä»…ä¸»æœº&gt;æ¨¡å¼</p>
<blockquote>
<p><strong>æœåŠ¡å™¨</strong></p>
</blockquote>
<p><img src="http://img.ljh666.xyz/img/20200801215242.png"></p>
<blockquote>
<p><strong>å®¢æˆ·æœº</strong></p>
</blockquote>
<p><img src="http://img.ljh666.xyz/img/20200801221405.png"></p>
<h2 id="å®‰è£…DHCPå·¥å…·"><a href="#å®‰è£…DHCPå·¥å…·" class="headerlink" title="å®‰è£…DHCPå·¥å…·"></a>å®‰è£…DHCPå·¥å…·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install dhcp</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®DHCP"><a href="#é…ç½®DHCP" class="headerlink" title="é…ç½®DHCP"></a>é…ç½®DHCP</h2><p>å¤åˆ¶æ¨¡æ¿æ–‡ä»¶</p>
<p>æŒ‘é€‰å…¶ä¸­æœ€ç»†çš„ä¸€ä¸ªå­ç½‘æ¨¡å—åšä¿®æ”¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># A slightly different configuration for an internal subnet.</span><br><span class="line">subnet 10.10.10.0 netmask 255.255.255.0 &#123;</span><br><span class="line">  range 10.10.10.20 10.10.10.200;</span><br><span class="line">  option domain-name-servers 10.10.10.12;    # DNSæœåŠ¡å™¨åœ°å€</span><br><span class="line">  option domain-name &quot;ljh.com&quot;;                # DNSåŸŸ</span><br><span class="line">  option routers 10.10.10.12;                # ç½‘å…³</span><br><span class="line">  option broadcast-address 10.10.10.255;    # å¹¿æ’­åœ°å€(å¯ä¸å†™)</span><br><span class="line">  default-lease-time 600;            # é»˜è®¤ç§Ÿçº¦ï¼ˆsï¼‰</span><br><span class="line">  max-lease-time 7200;                # æœ€å¤§ç§Ÿçº¦ï¼ˆsï¼‰</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•DHCPæœåŠ¡å™¨"><a href="#æµ‹è¯•DHCPæœåŠ¡å™¨" class="headerlink" title="æµ‹è¯•DHCPæœåŠ¡å™¨"></a>æµ‹è¯•DHCPæœåŠ¡å™¨</h2><h3 id="å¯åŠ¨DHCP-æœåŠ¡ådhcpd"><a href="#å¯åŠ¨DHCP-æœåŠ¡ådhcpd" class="headerlink" title="å¯åŠ¨DHCP(æœåŠ¡ådhcpd)"></a>å¯åŠ¨DHCP(æœåŠ¡ådhcpd)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable dhcpd</span><br><span class="line">systemctl start dhcpd</span><br><span class="line">systemctl status dhcpd</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®æµ‹è¯•æœº"><a href="#é…ç½®æµ‹è¯•æœº" class="headerlink" title="é…ç½®æµ‹è¯•æœº"></a>é…ç½®æµ‹è¯•æœº</h3><p>å¤åˆ¶ç½‘å¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ifcfg-ens33 ifcfg-ens38</span><br></pre></td></tr></table></figure>

<p>ç¼–è¾‘ç½‘å¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost network-scripts]# vim ifcfg-ens38</span><br><span class="line">TYPE&#x3D;Ethernet</span><br><span class="line">PROXY_METHOD&#x3D;none</span><br><span class="line">BROWSER_ONLY&#x3D;no</span><br><span class="line">BOOTPROTO&#x3D;dhcp                # ä¿®æ”¹ä¸ºdhcpæ¨¡å¼</span><br><span class="line">DEFROUTE&#x3D;yes</span><br><span class="line">IPV4_FAILURE_FATAL&#x3D;no</span><br><span class="line">IPV6INIT&#x3D;yes</span><br><span class="line">IPV6_AUTOCONF&#x3D;yes</span><br><span class="line">IPV6_DEFROUTE&#x3D;yes</span><br><span class="line">IPV6_FAILURE_FATAL&#x3D;no</span><br><span class="line">IPV6_ADDR_GEN_MODE&#x3D;stable-privacy</span><br><span class="line">NAME&#x3D;ens37                    # è¦åˆ é™¤å¤åˆ¶è¿‡æ¥çš„UUIDå’Œipåœ°å€</span><br><span class="line">DEVICE&#x3D;ens37</span><br><span class="line">ONBOOT&#x3D;yes</span><br></pre></td></tr></table></figure>

<p> é‡å¯ç½‘å¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹åœ°å€è·å–åˆ°çš„åœ°å€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@xserver1 network-scripts]# ip addr show ens38</span><br><span class="line">16: ens38: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link&#x2F;ether 00:0c:29:4a:64:9b brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 10.10.10.20&#x2F;24 brd 10.10.10.255 scope global noprefixroute dynamic ens38</span><br><span class="line">       valid_lft 348sec preferred_lft 348sec</span><br><span class="line">    inet6 fe80::a7ed:a38c:e4e2:3d3a&#x2F;64 scope link noprefixroute </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡å™¨ç«¯æ—¥å¿—(dhcpæŠ¥æ–‡ä»ens33ç½‘å¡å‘å‡ºåˆ°å®¢æˆ·æœº)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost network-scripts]# tail -10  &#x2F;var&#x2F;log&#x2F;messages </span><br><span class="line">Aug  2 06:41:44 localhost dhcpd: DHCPREQUEST for 10.10.10.20 from 00:0c:29:4a:64:9b (xserver1) via ens33</span><br><span class="line">Aug  2 06:41:44 localhost dhcpd: DHCPACK on 10.10.10.20 to 00:0c:29:4a:64:9b (xserver1) via ens33</span><br><span class="line">Aug  2 06:41:46 localhost dhcpd: DHCPREQUEST for 10.10.10.20 from 00:0c:29:4a:64:9b (xserver1) via ens33</span><br><span class="line">Aug  2 06:41:46 localhost dhcpd: DHCPACK on 10.10.10.20 to 00:0c:29:4a:64:9b (xserver1) via ens33</span><br><span class="line">Aug  2 06:41:50 localhost dhcpd: DHCPREQUEST for 10.10.10.20 from 00:0c:29:4a:64:9b (xserver1) via ens33</span><br><span class="line">Aug  2 06:41:50 localhost dhcpd: DHCPACK on 10.10.10.20 to 00:0c:29:4a:64:9b (xserver1) via ens33</span><br></pre></td></tr></table></figure>






      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ljh.xyz/2020/08/01/%E5%AE%89%E8%A3%85%20%20%E9%85%8D%E7%BD%AEDHCP%E6%9C%8D%E5%8A%A1%E5%99%A8/" data-id="ckkzd08hi000d7ou10gvldtrl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Centos/" rel="tag">Centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%BA%A7/" rel="tag">äº‘è®¡ç®—ä¸­çº§</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ç”¨Centosæ­å»ºpostfix-dovecoté‚®ä»¶æœåŠ¡å™¨(éš¾)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/01/%E7%94%A8Centos%E6%90%AD%E5%BB%BApostfix-dovecot%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8(%E9%9A%BE)/" class="article-date">
  <time datetime="2020-08-01T15:24:18.000Z" itemprop="datePublished">2020-08-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/01/%E7%94%A8Centos%E6%90%AD%E5%BB%BApostfix-dovecot%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8(%E9%9A%BE)/">ç”¨Centosæ­å»ºé‚®ä»¶æœåŠ¡å™¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ç”¨Centosæ­å»ºé‚®ä»¶æœåŠ¡å™¨"><a href="#ç”¨Centosæ­å»ºé‚®ä»¶æœåŠ¡å™¨" class="headerlink" title="ç”¨Centosæ­å»ºé‚®ä»¶æœåŠ¡å™¨"></a>ç”¨Centosæ­å»ºé‚®ä»¶æœåŠ¡å™¨</h1><h2 id="çŸ¥è¯†æ‰«ç›²"><a href="#çŸ¥è¯†æ‰«ç›²" class="headerlink" title="çŸ¥è¯†æ‰«ç›²"></a>çŸ¥è¯†æ‰«ç›²</h2><blockquote>
<p>postfixç®¡é‚®ä»¶æ”¶å‘ï¼Œä¹Ÿå°±æ˜¯SMTPæœåŠ¡å™¨<br>dovecotè´Ÿè´£é‚®ä»¶ç®¡ç†ï¼Œä¸Šä¼ ï¼Œä¸‹è½½ï¼Œåˆ é™¤ç­‰ã€‚ä¹Ÿå°±æ˜¯POP3/IMAPæœåŠ¡å™¨<br>amsmtpåˆ™æ˜¯åŸºäºwebçš„Postfix é‚®ä»¶å‘é€æœåŠ¡å™¨çš„ç®¡ç†å·¥å…·ï¼Œå¯ä»¥ç›´æ¥ç®¡ç†Postfix çš„è™šæ‹ŸåŸŸåå’Œç”¨æˆ·(æœ¬æ–‡æœªä½¿ç”¨    )<br>ä¸‰è€…æ˜¯å®Œå…¨ä¸å†²çªçš„ä¸åŒçš„ä¸œè¥¿ï¼Œé…åˆä½¿ç”¨æ‰èƒ½å½¢æˆ<strong>å®Œæ•´çš„é‚®ä»¶ç³»ç»Ÿ</strong>ï¼</p>
</blockquote>
<h2 id="ä½¿ç”¨å·¥å…·"><a href="#ä½¿ç”¨å·¥å…·" class="headerlink" title="ä½¿ç”¨å·¥å…·"></a>ä½¿ç”¨å·¥å…·</h2><ul>
<li>postfix(å‘é€)</li>
<li>dovecot(æ¥æ”¶,ç®¡ç†)</li>
<li>telnet(è¿æ¥é‚®ä»¶æœåŠ¡å™¨, æä¾›äº¤äº’ç•Œé¢)</li>
</ul>
<h2 id="æ­å»ºDNSæœåŠ¡å™¨"><a href="#æ­å»ºDNSæœåŠ¡å™¨" class="headerlink" title="æ­å»ºDNSæœåŠ¡å™¨"></a>æ­å»ºDNSæœåŠ¡å™¨</h2><p>ç›®çš„:ç»™é‚®ä»¶æœåŠ¡å™¨æä¾›åŸŸåç³»è§£ææœåŠ¡</p>
<p>æ­å»ºDNSæœåŠ¡å™¨å…·ä½“æ•™ç¨‹:  <a href="%5Bhttp://www.ljh666.xyz/2020/07/31/%E6%90%AD%E5%BB%BADNS%E6%9C%8D%E5%8A%A1%E5%99%A8/%5D(http://www.ljh666.xyz/2020/07/31/%E6%90%AD%E5%BB%BADNS%E6%9C%8D%E5%8A%A1%E5%99%A8/)">æ­å»ºDNSæœåŠ¡å™¨</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install bind-chroot bind-utils</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹DNSé…ç½®æ–‡ä»¶å‰è®°å¾—å¤‡ä»½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">[root@pxe yum.repos.d]# cat &#x2F;etc&#x2F;named.conf</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; named.conf</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; Provided by Red Hat bind package to configure the ISC BIND named(8) DNS</span><br><span class="line">&#x2F;&#x2F; server as a caching only nameserver (as a localhost DNS resolver only).</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; See &#x2F;usr&#x2F;share&#x2F;doc&#x2F;bind*&#x2F;sample&#x2F; for example named configuration files.</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; See the BIND Administrator&#39;s Reference Manual (ARM) for details about the</span><br><span class="line">&#x2F;&#x2F; configuration located in &#x2F;usr&#x2F;share&#x2F;doc&#x2F;bind-&#123;version&#125;&#x2F;Bv9ARM.html</span><br><span class="line"></span><br><span class="line">options &#123;</span><br><span class="line">        listen-on port 53 &#123; any; &#125;;</span><br><span class="line">        listen-on-v6 port 53 &#123; ::1; &#125;;</span><br><span class="line">        directory       &quot;&#x2F;var&#x2F;named&quot;;</span><br><span class="line">        dump-file       &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;cache_dump.db&quot;;</span><br><span class="line">        statistics-file &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;named_stats.txt&quot;;</span><br><span class="line">        memstatistics-file &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;named_mem_stats.txt&quot;;</span><br><span class="line">        recursing-file  &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;named.recursing&quot;;</span><br><span class="line">        secroots-file   &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;named.secroots&quot;;</span><br><span class="line">        allow-query     &#123; any; &#125;;</span><br><span class="line"></span><br><span class="line">        &#x2F;* </span><br><span class="line">         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.</span><br><span class="line">         - If you are building a RECURSIVE (caching) DNS server, you need to enable </span><br><span class="line">           recursion. </span><br><span class="line">         - If your recursive DNS server has a public IP address, you MUST enable access </span><br><span class="line">           control to limit queries to your legitimate users. Failing to do so will</span><br><span class="line">           cause your server to become part of large scale DNS amplification </span><br><span class="line">           attacks. Implementing BCP38 within your network would greatly</span><br><span class="line">           reduce such attack surface </span><br><span class="line">        *&#x2F;</span><br><span class="line">        recursion yes;</span><br><span class="line"></span><br><span class="line">        dnssec-enable yes;</span><br><span class="line">        dnssec-validation yes;</span><br><span class="line"></span><br><span class="line">        &#x2F;* Path to ISC DLV key *&#x2F;</span><br><span class="line">        bindkeys-file &quot;&#x2F;etc&#x2F;named.root.key&quot;;</span><br><span class="line"></span><br><span class="line">        managed-keys-directory &quot;&#x2F;var&#x2F;named&#x2F;dynamic&quot;;</span><br><span class="line"></span><br><span class="line">        pid-file &quot;&#x2F;run&#x2F;named&#x2F;named.pid&quot;;</span><br><span class="line">        session-keyfile &quot;&#x2F;run&#x2F;named&#x2F;session.key&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">logging &#123;</span><br><span class="line">        channel default_debug &#123;</span><br><span class="line">                file &quot;data&#x2F;named.run&quot;;</span><br><span class="line">                severity dynamic;</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;.&quot; IN &#123;</span><br><span class="line">        type hint;</span><br><span class="line">        file &quot;named.ca&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">include &quot;&#x2F;etc&#x2F;named.rfc1912.zones&quot;;</span><br><span class="line">include &quot;&#x2F;etc&#x2F;named.root.key&quot;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@pxe yum.repos.d]# cat &#x2F;etc&#x2F;named.rfc1912.zones</span><br><span class="line">&#x2F;&#x2F; named.rfc1912.zones:</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; Provided by Red Hat caching-nameserver package </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ISC BIND named zone configuration for zones recommended by</span><br><span class="line">&#x2F;&#x2F; RFC 1912 section 4.1 : localhost TLDs and address zones</span><br><span class="line">&#x2F;&#x2F; and http:&#x2F;&#x2F;www.ietf.org&#x2F;internet-drafts&#x2F;draft-ietf-dnsop-default-local-zones-02.txt</span><br><span class="line">&#x2F;&#x2F; (c)2007 R W Franks</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F; See &#x2F;usr&#x2F;share&#x2F;doc&#x2F;bind*&#x2F;sample&#x2F; for example named configuration files.</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line"></span><br><span class="line">zone &quot;ljh.com&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.localhost&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;10.10.10.in-addr.arpa&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.loopback&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@pxe yum.repos.d]# cat &#x2F;var&#x2F;named&#x2F;named.localhost  </span><br><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  @ mail.qq.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns.ljh.com.</span><br><span class="line">ns      A       10.10.10.12</span><br><span class="line">mail    A       10.10.10.12</span><br><span class="line">[root@pxe yum.repos.d]# cat &#x2F;var&#x2F;named&#x2F;named.loopback</span><br><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  @ mail.qq.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns.ljh.com.</span><br><span class="line">ns      A       10.10.10.12</span><br><span class="line">12      PTR     mail.ljh.com.</span><br></pre></td></tr></table></figure>

<h3 id="éªŒè¯DNSæ­å»ºç»“æœ"><a href="#éªŒè¯DNSæ­å»ºç»“æœ" class="headerlink" title="éªŒè¯DNSæ­å»ºç»“æœ"></a>éªŒè¯DNSæ­å»ºç»“æœ</h3><p>é…ç½®æµ‹è¯•æœº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@pxe yum.repos.d]# cat &#x2F;etc&#x2F;resolv.conf</span><br><span class="line"># Generated by NetworkManager</span><br><span class="line">search localdomain</span><br><span class="line">nameserver 10.10.10.12</span><br><span class="line">nameserver 100.100.100.240    #ç”¨äºè¿æ¥å¤–ç½‘çš„, ä¸éªŒè¯å®éªŒæ— å…³</span><br></pre></td></tr></table></figure>

<p>éªŒè¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@pxe yum.repos.d]# dig -t A mail.ljh.com</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.4-P2-RedHat-9.11.4-16.P2.el7_8.6 &lt;&lt;&gt;&gt; -t A mail.ljh.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 64759</span><br><span class="line">;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 2</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 4096</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;mail.ljh.com.                  IN      A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">mail.ljh.com.           86400   IN      A       10.10.10.12</span><br><span class="line"></span><br><span class="line">;; AUTHORITY SECTION:</span><br><span class="line">ljh.com.                86400   IN      NS      ns.ljh.com.</span><br><span class="line"></span><br><span class="line">;; ADDITIONAL SECTION:</span><br><span class="line">ns.ljh.com.             86400   IN      A       10.10.10.12</span><br><span class="line"></span><br><span class="line">;; Query time: 0 msec</span><br><span class="line">;; SERVER: 10.10.10.12#53(10.10.10.12)</span><br><span class="line">;; WHEN: å…­ 8æœˆ 01 16:20:34 CST 2020</span><br><span class="line">;; MSG SIZE  rcvd: 90</span><br></pre></td></tr></table></figure>

<h2 id="æ­å»ºé‚®ä»¶æœåŠ¡å™¨"><a href="#æ­å»ºé‚®ä»¶æœåŠ¡å™¨" class="headerlink" title="æ­å»ºé‚®ä»¶æœåŠ¡å™¨"></a>æ­å»ºé‚®ä»¶æœåŠ¡å™¨</h2><h3 id="å®‰è£…postfix"><a href="#å®‰è£…postfix" class="headerlink" title="å®‰è£…postfix"></a>å®‰è£…postfix</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -e postfix        # å¸è½½ç³»ç»Ÿè‡ªå¸¦ç‰ˆæœ¬</span><br><span class="line">yum -y install postfix</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®postfixçš„ç³»ç»Ÿç”¨æˆ·ä¸ç”¨æˆ·ç»„"><a href="#é…ç½®postfixçš„ç³»ç»Ÿç”¨æˆ·ä¸ç”¨æˆ·ç»„" class="headerlink" title="é…ç½®postfixçš„ç³»ç»Ÿç”¨æˆ·ä¸ç”¨æˆ·ç»„"></a>é…ç½®postfixçš„ç³»ç»Ÿç”¨æˆ·ä¸ç”¨æˆ·ç»„</h3><p>åˆ é™¤ç³»ç»Ÿå·²æœ‰çš„postfixç”¨æˆ·ä¸postdropç”¨æˆ·ç»„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">userdel postfix</span><br><span class="line">groupdel postdrop</span><br></pre></td></tr></table></figure>

<p>æ–°å»ºç”¨æˆ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd -g 2525 postfix</span><br><span class="line">useradd -g 2525 -u 2525 -M -s &#x2F;sbin&#x2F;nologin postfix</span><br></pre></td></tr></table></figure>

<blockquote>
<p>-s, â€“shell SHELL             æ–°è´¦æˆ·çš„ç™»å½• shell</p>
<p>-M, â€“no-create-home          ä¸åˆ›å»ºç”¨æˆ·çš„ä¸»ç›®å½•</p>
</blockquote>
<h3 id="é…ç½®postfix"><a href="#é…ç½®postfix" class="headerlink" title="é…ç½®postfix"></a>é…ç½®postfix</h3><p>ä¿®æ”¹å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@mail~]#vi&#x2F;etc&#x2F;postfix&#x2F;main.cf     </span><br><span class="line">#ä¿®æ”¹é‚®å±€ä¸»æœºå</span><br><span class="line">myhostname&#x3D;mail.testmail.com         </span><br><span class="line">#ä¿®æ”¹é‚®å±€åŸŸå</span><br><span class="line">mydomain&#x3D;testmail.com         </span><br><span class="line">#å¯„å‡ºé‚®ä»¶åŸŸåï¼Œåˆ é™¤æ³¨é‡Š</span><br><span class="line">myorigin&#x3D;$mydomain                </span><br><span class="line">#ä¿®æ”¹ç›‘å¬æ‰€æœ‰ç½‘å¡ï¼Œåˆ é™¤æ³¨é‡Š</span><br><span class="line">inet_interfaces&#x3D;all            </span><br><span class="line">#ä¿®æ”¹å¯æ¥æ”¶é‚®ä»¶çš„ä¸»æœºåå’ŒåŸŸåï¼Œå¯è¢«ä¸­ç»§çš„åŸŸåmydestination&#x3D;$myhostname,localhost.$mydomain,localhost,$mydomain            #ä¿®æ”¹å¯æ¥æ”¶é‚®ä»¶çš„ä¸»æœºåå’ŒåŸŸåï¼Œå¯è¢«ä¸­ç»§çš„ä¸»æœº</span><br><span class="line">#æŒ‰å®é™…æƒ…å†µå¡«å†™</span><br><span class="line">mynetworks&#x3D;10.10.10.0&#x2F;24,127.0.0.0&#x2F;8        </span><br><span class="line">#å–æ¶ˆæ³¨é‡Š</span><br><span class="line">home_mailbox&#x3D;Maildir&#x2F;        </span><br><span class="line">#æŒ‡å®šä¿¡ä»»ç½‘æ®µç±»å‹</span><br><span class="line">mynetworks_style&#x3D;host            </span><br><span class="line">#æŒ‡å®šå…è®¸ä¸­è½¬é‚®ä»¶çš„åŸŸåï¼Œå–æ¶ˆæ³¨é‡Š</span><br><span class="line">relay_domains&#x3D;$mydestination</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹æƒé™, è®¾ç½®å¼€æœºè‡ªå¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@mail~]#chown postfix.postfix -R &#x2F;var&#x2F;lib&#x2F;postfix&#x2F;</span><br><span class="line">[root@mail~]#chown postfix.postfix &#x2F;var&#x2F;spool&#x2F; -R</span><br><span class="line">[root@mail~]#systemctl enable postfix [root@mail~]#systemctl restart postfix</span><br></pre></td></tr></table></figure>



<h3 id="æµ‹è¯•postfix"><a href="#æµ‹è¯•postfix" class="headerlink" title="æµ‹è¯•postfix"></a>æµ‹è¯•postfix</h3><p>æ·»åŠ postfixé‚®ä»¶ç”¨æˆ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mail~]#useradd cwl</span><br><span class="line">[root@mail~]#echo&quot;000&quot;|passwd --stdin cwl</span><br></pre></td></tr></table></figure>

<p>å®‰è£…telnetå·¥å…·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install telnet</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨telnetå·¥å…·è¿æ¥åˆ°postfixæœåŠ¡å™¨, å‘é€é‚®ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# telnet mail.ljh.com 25</span><br><span class="line">Trying 10.10.10.12...</span><br><span class="line">Connected to mail.ljh.com.</span><br><span class="line">Escape character is &#39;^]&#39;.</span><br><span class="line">220 mail.ljh.com ESMTP Postfix            #è¿æ¥æˆåŠŸ</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# telnet mail.ljh.com 25</span><br><span class="line">Trying 10.10.10.12...</span><br><span class="line">Connected to mail.ljh.com.</span><br><span class="line">Escape character is &#39;^]&#39;.</span><br><span class="line">220 mail.ljh.com ESMTP Postfix    &#x2F;&#x2F;åœ¨ä¸‹é¢çš„ç»ˆç«¯ä¸­-è¾“å…¥-å‘½ä»¤ä¸å†…å®¹</span><br><span class="line">mail from:root@testmail.com        &#x2F;&#x2F;å‘ä»¶äºº</span><br><span class="line">250 2.1.0 Ok</span><br><span class="line">rcpt to:cwl            &#x2F;&#x2F;æ”¶ä»¶äºº</span><br><span class="line">250 2.1.5 Ok</span><br><span class="line">data        &#x2F;&#x2F;å¡«å†™é‚®ä»¶</span><br><span class="line">354 End data with &lt;CR&gt; &lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</span><br><span class="line">hello,this is test mail.    &#x2F;&#x2F;è¾“å…¥é‚®ä»¶å†…å®¹</span><br><span class="line">.        &#x2F;&#x2F;ä»¥â€œ.â€ç»“æŸè¾“å…¥</span><br><span class="line">250 2.0.0 Ok:queued as DC5693000085</span><br><span class="line">quit            &#x2F;&#x2F;é€€å‡º</span><br><span class="line">221 2.0.0 Bye </span><br><span class="line">Connection closed by foreign host.</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å‘é€çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mail~]#tail&#x2F;var&#x2F;log&#x2F;maillog |grep sent </span><br><span class="line">Oct 607:20:12 localhost postfix&#x2F;local[2755]:DC5693000085:to&#x3D;&lt;cwl@testmail.com&gt;,orig_to&#x3D;&lt;cwl&gt;,relay&#x3D;local,delay&#x3D;31,delays&#x3D;31&#x2F;0.01&#x2F;0&#x2F;0.02,dsn&#x3D;2.0.0,status&#x3D;sent(deliveredtomaildir)</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…dovecot"><a href="#å®‰è£…dovecot" class="headerlink" title="å®‰è£…dovecot"></a>å®‰è£…dovecot</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install dovecot</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®dovecot"><a href="#é…ç½®dovecot" class="headerlink" title="é…ç½®dovecot"></a>é…ç½®dovecot</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@mail~]# vi&#x2F;etc&#x2F;dovecot&#x2F;dovecot.conf</span><br><span class="line">#å¦‚æœä¸ä½¿ç”¨IPv6ï¼Œè¯·ä¿®æ”¹ä¸º*</span><br><span class="line">listen&#x3D;*</span><br><span class="line">[root@mail~]# vi&#x2F;etc&#x2F;dovecot&#x2F;conf.d&#x2F;10-auth.conf</span><br><span class="line">#9è¡Œ:å–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹</span><br><span class="line">#æ˜¯å¦å…è®¸åœ¨æ²’æœ‰SSL&#x2F;TLSä¸‹ä»¥æ˜ç ç™»å½•</span><br><span class="line">disable_plaintext_auth &#x3D; no</span><br><span class="line">#97è¡Œ:æ·»åŠ </span><br><span class="line">auth_mechanisms &#x3D; plain login</span><br><span class="line">[root@mail~]# vi&#x2F;etc&#x2F;dovecot&#x2F;conf.d&#x2F;10-mail.conf</span><br><span class="line">#30è¡Œ:å–æ¶ˆæ³¨é‡Šå¹¶æ·»åŠ </span><br><span class="line">mail_location &#x3D; maildir:~&#x2F;Maildir</span><br><span class="line">[root@mail~]# vi&#x2F;etc&#x2F;dovecot&#x2F;conf.d&#x2F;10-master.conf</span><br><span class="line">#88-90è¡Œ:å–æ¶ˆæ³¨é‡Šå¹¶æ·»åŠ Postfix smtpéªŒè¯</span><br><span class="line">unix_listener &#x2F;var&#x2F;spool&#x2F;postfix&#x2F;private&#x2F;auth</span><br><span class="line">&#123;</span><br><span class="line">    mode&#x3D;0666</span><br><span class="line">    user&#x3D;postfix</span><br><span class="line">    group&#x3D;postfix</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨dovecot</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start dovecot</span><br></pre></td></tr></table></figure>

<h3 id="æµ‹è¯•dovecotæ¥æ”¶é‚®ä»¶"><a href="#æµ‹è¯•dovecotæ¥æ”¶é‚®ä»¶" class="headerlink" title="æµ‹è¯•dovecotæ¥æ”¶é‚®ä»¶"></a>æµ‹è¯•dovecotæ¥æ”¶é‚®ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# telnet mail.ljh.com 110</span><br><span class="line">Trying 10.10.10.12...</span><br><span class="line">Connected to mail.ljh.com.</span><br><span class="line">Escape character is &#39;^]&#39;.</span><br><span class="line">+OK Dovecot ready.</span><br><span class="line">user cwl        &#x2F;&#x2F;ç™»å½•</span><br><span class="line">+OK</span><br><span class="line">pass 000        &#x2F;&#x2F;å¯†ç </span><br><span class="line">+OK Logged in.</span><br><span class="line">List            &#x2F;&#x2F;é‚®ä»¶åˆ—è¡¨</span><br><span class="line">+OK 1 messages:</span><br><span class="line">1 390</span><br><span class="line">.    </span><br><span class="line">retr 1            &#x2F;&#x2F;è¾“å…¥é‚®ä»¶ç¼–å·æ¥æŸ¥çœ‹é‚®ä»¶</span><br><span class="line">+OK 390 octets</span><br><span class="line">Return-Path: &lt;root@ljh.com&gt;</span><br><span class="line">X-Original-To: cwl</span><br><span class="line">Delivered-To: cwl@ljh.com</span><br><span class="line">Received: from mail.ljh.com (mail.ljh.com [10.10.10.12])</span><br><span class="line">        by mail.ljh.com (Postfix) with SMTP id 3404840AC5C9</span><br><span class="line">        for &lt;cwl&gt;; Sat,  1 Aug 2020 19:25:02 +0800 (CST)</span><br><span class="line">Message-Id: &lt;20200801112513.3404840AC5C9@mail.ljh.com&gt;</span><br><span class="line">Date: Sat,  1 Aug 2020 19:25:02 +0800 (CST)</span><br><span class="line">From: root@ljh.com</span><br><span class="line"></span><br><span class="line">hello,this is a test mail.</span><br><span class="line">.</span><br><span class="line">quit        &#x2F;&#x2F;é€€å‡º</span><br><span class="line">+OK Logging out.</span><br><span class="line">Connection closed by foreign host.</span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ljh.xyz/2020/08/01/%E7%94%A8Centos%E6%90%AD%E5%BB%BApostfix-dovecot%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8(%E9%9A%BE)/" data-id="ckkzd08hx000r7ou10w3w4xh5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Centos/" rel="tag">Centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%BA%A7/" rel="tag">äº‘è®¡ç®—ä¸­çº§</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Nginx æœåŠ¡å™¨é‡å¯ä¸å…³é—­å‘½å" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/31/Nginx%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%87%8D%E5%90%AF%E4%B8%8E%E5%85%B3%E9%97%AD%E5%91%BD%E5%90%8D/" class="article-date">
  <time datetime="2020-07-31T15:24:18.000Z" itemprop="datePublished">2020-07-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/31/Nginx%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%87%8D%E5%90%AF%E4%B8%8E%E5%85%B3%E9%97%AD%E5%91%BD%E5%90%8D/">Nginx æœåŠ¡å™¨é‡å¯ä¸å…³é—­å‘½ä»¤</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Nginx-æœåŠ¡å™¨é‡å¯ä¸å…³é—­å‘½ä»¤"><a href="#Nginx-æœåŠ¡å™¨é‡å¯ä¸å…³é—­å‘½ä»¤" class="headerlink" title="Nginx æœåŠ¡å™¨é‡å¯ä¸å…³é—­å‘½ä»¤"></a>Nginx æœåŠ¡å™¨é‡å¯ä¸å…³é—­å‘½ä»¤</h1><blockquote>
<p>å…³äºnginxçš„ä½¿ç”¨çš„è®°å½•</p>
</blockquote>
<h2 id="é‡å¯-é‡è½½"><a href="#é‡å¯-é‡è½½" class="headerlink" title="é‡å¯|é‡è½½"></a>é‡å¯|é‡è½½</h2><p>nginx -s reload ï¼šä¿®æ”¹é…ç½®åé‡æ–°åŠ è½½ç”Ÿæ•ˆ</p>
<p>nginx -s reopen ï¼šé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶<br>nginx -t -c /path/to/nginx.conf æµ‹è¯•nginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®</p>
<h2 id="å…³é—­nginxï¼š"><a href="#å…³é—­nginxï¼š" class="headerlink" title="å…³é—­nginxï¼š"></a>å…³é—­nginxï¼š</h2><p>nginx -s stop :å¿«é€Ÿåœæ­¢nginx<br>     quit ï¼šå®Œæ•´æœ‰åºçš„åœæ­¢nginx</p>
<p>å…¶ä»–çš„åœæ­¢nginx æ–¹å¼ï¼š</p>
<p>ps -ef | grep nginx</p>
<p>kill -QUIT ä¸»è¿›ç¨‹å·   ï¼šä»å®¹åœæ­¢Nginx<br>kill -TERM ä¸»è¿›ç¨‹å·   ï¼šå¿«é€Ÿåœæ­¢Nginx<br>pkill -9 nginx     ï¼šå¼ºåˆ¶åœæ­¢Nginx</p>
<h2 id="å¯åŠ¨nginx"><a href="#å¯åŠ¨nginx" class="headerlink" title="å¯åŠ¨nginx:"></a>å¯åŠ¨nginx:</h2><p>nginx -c /path/to/nginx.conf</p>
<p>å¹³æ»‘é‡å¯nginxï¼š<br>kill -HUP ä¸»è¿›ç¨‹å·</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ljh.xyz/2020/07/31/Nginx%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%87%8D%E5%90%AF%E4%B8%8E%E5%85%B3%E9%97%AD%E5%91%BD%E5%90%8D/" data-id="ckkzd08hb00057ou11q9fca28" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Centos/" rel="tag">Centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%BA%A7/" rel="tag">äº‘è®¡ç®—ä¸­çº§</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-å®‰è£…sambaçš„æ³¨æ„äº‹é¡¹" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/31/%E5%AE%89%E8%A3%85samba%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/" class="article-date">
  <time datetime="2020-07-31T15:24:18.000Z" itemprop="datePublished">2020-07-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/31/%E5%AE%89%E8%A3%85samba%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/">å®‰è£…sambaçš„æ³¨æ„äº‹é¡¹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å®‰è£…sambaçš„æ³¨æ„äº‹é¡¹"><a href="#å®‰è£…sambaçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="å®‰è£…sambaçš„æ³¨æ„äº‹é¡¹"></a>å®‰è£…sambaçš„æ³¨æ„äº‹é¡¹</h2><p>ç»„æˆSambaè¿è¡Œçš„æœ‰ä¸¤ä¸ªæœåŠ¡ï¼Œä¸€ä¸ªæ˜¯SMBï¼Œå¦ä¸€ä¸ªæ˜¯NMBï¼›SMBæ˜¯Samba çš„æ ¸å¿ƒå¯åŠ¨æœåŠ¡ï¼Œä¸»è¦è´Ÿè´£å»ºç«‹ Linux SambaæœåŠ¡å™¨ä¸Sambaå®¢æˆ·æœºä¹‹é—´çš„å¯¹è¯ï¼Œ éªŒè¯ç”¨æˆ·èº«ä»½å¹¶æä¾›å¯¹æ–‡ä»¶å’Œæ‰“å°ç³»ç»Ÿçš„è®¿é—®ï¼Œåªæœ‰SMBæœåŠ¡å¯åŠ¨ï¼Œæ‰èƒ½å®ç°æ–‡ä»¶çš„å…±äº«ï¼Œç›‘å¬139 TCPç«¯å£ï¼›è€ŒNMBæœåŠ¡æ˜¯è´Ÿè´£è§£æç”¨çš„ï¼Œç±»ä¼¼ä¸DNSå®ç°çš„åŠŸèƒ½ï¼ŒNMBå¯ä»¥æŠŠLinuxç³»ç»Ÿå…±äº«çš„å·¥ä½œç»„åç§°ä¸å…¶IPå¯¹åº”èµ·æ¥ï¼Œå¦‚æœNMBæœåŠ¡æ²¡æœ‰å¯åŠ¨ï¼Œå°±åªèƒ½é€šè¿‡IPæ¥è®¿é—®å…±äº«æ–‡ä»¶ï¼Œç›‘å¬137å’Œ138 UDPç«¯å£ã€‚</p>
<p>å®‰è£…å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install samba samba-client</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ljh.xyz/2020/07/31/%E5%AE%89%E8%A3%85samba%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/" data-id="ckkzd08ho000g7ou11j1icdaz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Centos/" rel="tag">Centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%BA%A7/" rel="tag">äº‘è®¡ç®—ä¸­çº§</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-æœåŠ¡å™¨åˆ¶ä½œRAIDç£ç›˜é˜µåˆ—å¹¶ç®¡ç†" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/31/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B6%E4%BD%9CRAID%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97%E5%B9%B6%E7%AE%A1%E7%90%86/" class="article-date">
  <time datetime="2020-07-31T15:24:18.000Z" itemprop="datePublished">2020-07-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/31/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B6%E4%BD%9CRAID%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97%E5%B9%B6%E7%AE%A1%E7%90%86/">æœåŠ¡å™¨åˆ¶ä½œRAIDç£ç›˜é˜µåˆ—ä¸ç®¡ç†</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="æœåŠ¡å™¨åˆ¶ä½œRAIDç£ç›˜é˜µåˆ—ä¸ç®¡ç†"><a href="#æœåŠ¡å™¨åˆ¶ä½œRAIDç£ç›˜é˜µåˆ—ä¸ç®¡ç†" class="headerlink" title="æœåŠ¡å™¨åˆ¶ä½œRAIDç£ç›˜é˜µåˆ—ä¸ç®¡ç†"></a>æœåŠ¡å™¨åˆ¶ä½œRAIDç£ç›˜é˜µåˆ—ä¸ç®¡ç†</h1><h2 id="çŸ¥è¯†æ‰«ç›²"><a href="#çŸ¥è¯†æ‰«ç›²" class="headerlink" title="çŸ¥è¯†æ‰«ç›²"></a>çŸ¥è¯†æ‰«ç›²</h2><blockquote>
<p>Linuxç³»ç»Ÿä¸Šçš„/procç›®å½•æ˜¯ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œå³procæ–‡ä»¶ç³»ç»Ÿã€‚ä¸å…¶å®ƒå¸¸è§çš„æ–‡ä»¶ç³»ç»Ÿä¸åŒçš„æ˜¯ï¼Œ/procæ˜¯ä¸€ç§ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼ˆä¹Ÿå³è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œå­˜å‚¨çš„æ˜¯å½“å‰å†…æ ¸è¿è¡ŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç‰¹æ®Šæ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿™äº›æ–‡ä»¶æŸ¥çœ‹æœ‰å…³ç³»ç»Ÿç¡¬ä»¶åŠå½“å‰æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„ä¿¡æ¯ï¼Œç”šè‡³å¯ä»¥é€šè¿‡æ›´æ”¹å…¶ä¸­æŸäº›æ–‡ä»¶æ¥æ”¹å˜å†…æ ¸çš„è¿è¡ŒçŠ¶æ€ã€‚</p>
</blockquote>
<blockquote>
<p>baseæºï¼šè§£å†³rpmä¾èµ–æ€§å…³ç³»<br>epelæºï¼šExtra Packages for Enterprise Linuxçš„ç¼©å†™ï¼ŒåŒ…å«è®¸å¤šåŸºæºæ²¡æœ‰è½¯ä»¶ï¼Œä»ç„¶ä¿ç•™baseæºçš„å¥½å¤„</p>
</blockquote>
<blockquote>
<p>å½“ç³»ç»Ÿä¸­ä¸å­˜åœ¨é…ç½®æ–‡ä»¶/etc/mdadm.confã€/etc/mdadm/mdadm.confæ—¶ï¼Œç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œmdé©±åŠ¨ä¼šè‡ªåŠ¨æŸ¥æ‰¾åˆ†åŒºä¸ºFDæ ¼å¼çš„ç£ç›˜ã€‚æ‰€ä»¥ä¸€èˆ¬ä¼šä½¿ç”¨fdiskå·¥å…·å°†hdç£ç›˜å’Œsdç£ç›˜åˆ†åŒºï¼Œå†è®¾ç½®ä¸ºFDçš„ç£ç›˜åˆ†åŒºã€‚å› æ­¤å‡å¦‚ç›´æ¥ä½¿ç”¨/dev/sdaã€/dev/sdbåˆ›å»ºRAIDï¼Œç³»ç»Ÿé‡å¯åï¼Œä¸ä¼šé‡ç»„è¯¥RAIDã€‚</p>
</blockquote>
<h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><h3 id="ç¡¬ä»¶"><a href="#ç¡¬ä»¶" class="headerlink" title="ç¡¬ä»¶"></a>ç¡¬ä»¶</h3><p>æ·»åŠ 4å—20Gç¡¬ç›˜</p>
<h3 id="è½¯ä»¶"><a href="#è½¯ä»¶" class="headerlink" title="è½¯ä»¶"></a>è½¯ä»¶</h3><p>é…ç½®é˜¿é‡Œbaseæºä¸epelæº</p>
<p>ä¸‹è½½mdadmå·¥å…·</p>
<h3 id="æ ¡éªŒ"><a href="#æ ¡éªŒ" class="headerlink" title="æ ¡éªŒ"></a>æ ¡éªŒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®Raid-0é˜µåˆ—"><a href="#é…ç½®Raid-0é˜µåˆ—" class="headerlink" title="é…ç½®Raid 0é˜µåˆ—"></a>é…ç½®Raid 0é˜µåˆ—</h2><h3 id="åˆ›å»ºé˜µåˆ—"><a href="#åˆ›å»ºé˜µåˆ—" class="headerlink" title="åˆ›å»ºé˜µåˆ—"></a>åˆ›å»ºé˜µåˆ—</h3><p>å‘½ä»¤è§£æï¼š</p>
<ul>
<li><p>-C vï¼šåˆ›å»ºè®¾å¤‡ï¼Œå¹¶æ˜¾ç¤ºä¿¡æ¯ã€‚</p>
</li>
<li><p>-l 0ï¼šRAIDçš„ç­‰çº§ä¸ºRAID0ã€‚</p>
</li>
<li><p>-n 2ï¼šä½¿ç”¨ä¸¤å—ç¡¬ç›˜åˆ›å»ºRAIDã€‚</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mdadm -C -v &#x2F;dev&#x2F;md0 -l 0 -n 2 &#x2F;dev&#x2F;sdb &#x2F;dev&#x2F;sdc</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;proc&#x2F;mdstat</span><br><span class="line">mdadm -Ds</span><br><span class="line">mdadm -D &#x2F;dev&#x2F;md0</span><br><span class="line">mdadm -Ds&gt;&gt;&#x2F;etc&#x2F;mdadm.conf  #ç³»ç»Ÿé‡å¯åéœ€è¦è¯»å–çš„Raidé…ç½®æ–‡ä»¶æ¥åŠ è½½Raidé˜µåˆ—</span><br><span class="line">mkfs.xfs &#x2F;dev&#x2F;md0</span><br><span class="line">mkdir &#x2F;raid0</span><br><span class="line">mount &#x2F;dev&#x2F;md0 &#x2F;raid0</span><br><span class="line">df -Th &#x2F;raid0                # å‚æ•°Tæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿæ ¼å¼</span><br><span class="line">blkid &#x2F;dev&#x2F;md0</span><br><span class="line">echo &quot;UUID&#x3D;8eafdcb6-d46a-430a-8004-d58a68dc0751&#x2F;raid0 xfs defaults 0 0&quot;&gt;&gt;&#x2F;etc&#x2F;fstab</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤é˜µåˆ—"><a href="#åˆ é™¤é˜µåˆ—" class="headerlink" title="åˆ é™¤é˜µåˆ—"></a>åˆ é™¤é˜µåˆ—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">umount &#x2F;raid0</span><br><span class="line">mdadm -S &#x2F;dev&#x2F;md0</span><br><span class="line">rm -rf  &#x2F;etc&#x2F;mdadm.conf</span><br><span class="line">rm -rf &#x2F;raid0</span><br><span class="line">mdadm --zero-superblock &#x2F;dev&#x2F;sdb</span><br><span class="line">mdadm --zero-superblock &#x2F;dev&#x2F;sdc</span><br><span class="line">vim &#x2F;etc&#x2F;fstab</span><br><span class="line">UUID&#x3D;8eafdcb6-d46a-430a-8004-d58a68dc0751&#x2F;raid0 xfs defaults 0 0 #åˆ é™¤æ­¤è¡Œ</span><br></pre></td></tr></table></figure>



<h2 id="é…ç½®Raid-5é˜µåˆ—"><a href="#é…ç½®Raid-5é˜µåˆ—" class="headerlink" title="é…ç½®Raid 5é˜µåˆ—"></a>é…ç½®Raid 5é˜µåˆ—</h2><h3 id="åˆ›å»ºé˜µåˆ—-1"><a href="#åˆ›å»ºé˜µåˆ—-1" class="headerlink" title="åˆ›å»ºé˜µåˆ—"></a>åˆ›å»ºé˜µåˆ—</h3><ul>
<li>â€“spare-devices=1 è®¾ç½®Raid 5ä¸­å¤‡æœ‰ç£ç›˜æ•°ç›®ä¸º1</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mdadm -Cv &#x2F;dev&#x2F;md5 -l 5 -n 3 &#x2F;dev&#x2F;sdb &#x2F;dev&#x2F;sdc &#x2F;dev&#x2F;sdd --spare-devices&#x3D;1 &#x2F;dev&#x2F;sde</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mdadm -D &#x2F;dev&#x2F;md5</span><br><span class="line">mdadm -Ds&gt;&gt;&#x2F;etc&#x2F;mdadm.conf  #ç³»ç»Ÿé‡å¯åéœ€è¦è¯»å–çš„Raidé…ç½®æ–‡ä»¶æ¥åŠ è½½Raidé˜µåˆ—</span><br></pre></td></tr></table></figure>

<p>æ¨¡æ‹Ÿæ•…éšœ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mdadm -f &#x2F;dev&#x2F;md5 &#x2F;dev&#x2F;sdb        # å¼ºåˆ¶åˆ¶é€ æ•…éšœ</span><br><span class="line">mdadm -D &#x2F;dev&#x2F;md5</span><br><span class="line">mdadm -r &#x2F;dev&#x2F;md5 &#x2F;dev&#x2F;sdb        # ç§»é™¤æ•…éšœçš„ç¡¬ç›˜</span><br><span class="line">mdadm --add &#x2F;dev&#x2F;md5 &#x2F;dev&#x2F;sdb    # æ·»åŠ æ–°çš„ç¡¬ç›˜</span><br><span class="line">mdadm -D &#x2F;dev&#x2F;md5</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkfs.xfs &#x2F;dev&#x2F;md5</span><br><span class="line">mount &#x2F;dev&#x2F;md5 &#x2F;mnt</span><br><span class="line">df -h</span><br></pre></td></tr></table></figure>



<h3 id="åˆ é™¤é˜µåˆ—-1"><a href="#åˆ é™¤é˜µåˆ—-1" class="headerlink" title="åˆ é™¤é˜µåˆ—"></a>åˆ é™¤é˜µåˆ—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">umount &#x2F;dev&#x2F;md5</span><br><span class="line">df -h</span><br><span class="line">mdadm -S &#x2F;dev&#x2F;md5</span><br><span class="line">rm -rf  &#x2F;etc&#x2F;mdadm.conf</span><br><span class="line">rm -rf &#x2F;raid5</span><br><span class="line">mdadm -zero-superblock &#x2F;dev&#x2F;sdb</span><br><span class="line">mdadm -zero-superblock &#x2F;dev&#x2F;sdc</span><br><span class="line">mdadm -zero-superblock &#x2F;dev&#x2F;sde</span><br><span class="line">mdadm -zero-superblock &#x2F;dev&#x2F;sdd</span><br><span class="line">vim &#x2F;etc&#x2F;fstab</span><br><span class="line">UUID&#x3D;8eafdcb6-d46a-430a-8004-d58a68dc0751&#x2F;raid0 xfs defaults 0 0 #åˆ é™¤æ­¤è¡Œ</span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ljh.xyz/2020/07/31/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B6%E4%BD%9CRAID%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97%E5%B9%B6%E7%AE%A1%E7%90%86/" data-id="ckkzd08hr000i7ou18czt5iap" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Centos/" rel="tag">Centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%BA%A7/" rel="tag">äº‘è®¡ç®—ä¸­çº§</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-æ­å»ºDNSæœåŠ¡å™¨" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/31/%E6%90%AD%E5%BB%BADNS%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  <time datetime="2020-07-31T15:24:18.000Z" itemprop="datePublished">2020-07-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/31/%E6%90%AD%E5%BB%BADNS%E6%9C%8D%E5%8A%A1%E5%99%A8/">æ­å»ºDNSæœåŠ¡å™¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="æ­å»ºDNSæœåŠ¡å™¨"><a href="#æ­å»ºDNSæœåŠ¡å™¨" class="headerlink" title="æ­å»ºDNSæœåŠ¡å™¨"></a>æ­å»ºDNSæœåŠ¡å™¨</h1><h2 id="çŸ¥è¯†æ‰«ç›²"><a href="#çŸ¥è¯†æ‰«ç›²" class="headerlink" title="çŸ¥è¯†æ‰«ç›²"></a>çŸ¥è¯†æ‰«ç›²</h2><blockquote>
<p>å…¶ä¸­bind-chrootå’Œbind-utilsæ˜¯bindçš„ç›¸å…³åŒ…ã€‚</p>
</blockquote>
<blockquote>
<p>bind-chrootæ˜¯bindçš„ä¸€ä¸ªåŠŸèƒ½,ä½¿bindå¯ä»¥åœ¨ä¸€ä¸ªchrootçš„æ¨¡å¼ä¸‹è¿è¡Œ.ä¹Ÿå°±æ˜¯è¯´,bindè¿è¡Œæ—¶çš„/(æ ¹)ç›®å½•,å¹¶ä¸æ˜¯ç³»ç»ŸçœŸæ­£çš„/(æ ¹)ç›®å½•,åªæ˜¯ç³»ç»Ÿä¸­çš„ä¸€ä¸ªå­ç›®å½•è€Œå·².è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†æé«˜å®‰å…¨æ€§.å› ä¸ºåœ¨chrootçš„æ¨¡å¼ä¸‹,bindå¯ä»¥è®¿é—®çš„èŒƒå›´ä»…é™äºè¿™ä¸ªå­ç›®å½•çš„èŒƒå›´é‡Œ,æ— æ³•è¿›ä¸€æ­¥æå‡,è¿›å…¥åˆ°ç³»ç»Ÿçš„å…¶ä»–ç›®å½•ä¸­ã€‚bindçš„é»˜è®¤å¯åŠ¨æ–¹å¼å°±æ˜¯chrootæ–¹å¼ã€‚</p>
</blockquote>
<blockquote>
<p>rndc ä¸»è¦æ˜¯ç”¨æ¥æ§åˆ¶namedè¿›ç¨‹åŠå…¶é…ç½®æ–‡ä»¶çš„ï¼Œå¯ä»¥ç”¨æ¥è¿æ¥DNSæœåŠ¡å™¨å¹¶å¯¹é…ç½®è¿›è¡Œé‡æ–°è½½å…¥ï¼Œå…¶ç«¯å£å·å°±æ˜¯953</p>
</blockquote>
<h2 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h2><ul>
<li>ä½¿ç”¨bind-chrootå·¥å…·æ­å»ºdnsæœåŠ¡å™¨</li>
<li>ä½¿ç”¨bind-utilså·¥å…·åŒ…è¿›è¡Œç®¡ç†(å¦‚nslookupå‘½ä»¤)</li>
</ul>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul>
<li>å…³é—­é˜²ç«å¢™</li>
<li>é…ç½®yumæº</li>
<li>æ£€æŸ¥ç«¯å£æ˜¯å¦å ç”¨</li>
</ul>
<h2 id="DNSå„é…ç½®æ–‡ä»¶è¯´æ˜"><a href="#DNSå„é…ç½®æ–‡ä»¶è¯´æ˜" class="headerlink" title="DNSå„é…ç½®æ–‡ä»¶è¯´æ˜"></a>DNSå„é…ç½®æ–‡ä»¶è¯´æ˜</h2><p>DNSç›¸å…³çš„é…ç½®æ–‡ä»¶ä½ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@pxe yum.repos.d]# cat &#x2F;etc&#x2F;named</span><br><span class="line">named&#x2F;               named-chroot.files   named.conf           named.iscdlv.key     named.rfc1912.zones  named.root.key</span><br></pre></td></tr></table></figure>

<p>æ¨¡æ¿æ–‡ä»¶ä½ç½®(ä¸€èˆ¬ä¸ç”¨,ç›´æ¥ä½¿ç”¨ä¸»é…ç½®æ–‡ä»¶):/usr/share/doc/bind-9.11.4/named.conf.defaultæˆ–/usr/share/doc/bind-9.11.4/sample/é‡Œ</p>
<p>ä¸»é…ç½®æ–‡ä»¶ï¼š/etc/named.confï¼ˆæœåŠ¡å™¨è¿è¡Œå‚æ•°ï¼‰*chrootæ¨¡å¼ä¸‹è¿˜å¯ä»¥å†™åœ¨/var/named/chroot/etc/named.conf</p>
<p><img src="http://img.ljh666.xyz/img/20200731204826.png"></p>
<p>åŒºåŸŸé…ç½®æ–‡ä»¶ï¼š/etc/named.rfc1912.zonesï¼ˆæœåŠ¡å™¨è§£æçš„åŒºåŸŸé…ç½®ï¼Œæ­£åå‘åŒºåŸŸå®šä¹‰ä¿¡æ¯ï¼‰</p>
<p><img src="http://img.ljh666.xyz/img/20200731204935.png"></p>
<p><img src="http://img.ljh666.xyz/img/20200731213647.png"></p>
<p>æ•°æ®é…ç½®æ–‡ä»¶ï¼š/var/named/xx.xxï¼ˆä¸»æœºåå’ŒIPåœ°å€çš„å¯¹åº”è§£æå…³ç³»ï¼ŒåŠä¸»ä»åŒæ­¥ä¿¡æ¯ï¼‰</p>
<p><img src="http://img.ljh666.xyz/img/20200731205001.png"></p>
<p><img src="http://img.ljh666.xyz/img/20200731214505.png"></p>
<h2 id="å¼€å§‹å®‰è£…DNS"><a href="#å¼€å§‹å®‰è£…DNS" class="headerlink" title="å¼€å§‹å®‰è£…DNS"></a>å¼€å§‹å®‰è£…DNS</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install bind-chroot bind-utils</span><br></pre></td></tr></table></figure>

<p>æ­¤å‘½ä»¤å¯ä»¥æŸ¥è¯¢å·²å®‰è£…çš„åŒ…çš„å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ql bind-chroot</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;named.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">12 options &#123;</span><br><span class="line"> 13         listen-on port 53 &#123; any; &#125;; #ä¿®æ”¹ä¸ºany</span><br><span class="line"> 14         listen-on-v6 port 53 &#123; ::1; &#125;;</span><br><span class="line"> 15         directory       &quot;&#x2F;var&#x2F;named&quot;;</span><br><span class="line"> 16         dump-file       &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;cache_dump.db&quot;;</span><br><span class="line"> 17         statistics-file &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;named_stats.txt&quot;;</span><br><span class="line"> 18         memstatistics-file &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;named_mem_stats.txt&quot;;</span><br><span class="line"> 19         recursing-file  &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;named.recursing&quot;;</span><br><span class="line"> 20         secroots-file   &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;named.secroots&quot;;</span><br><span class="line"> 21         allow-query     &#123; any; &#125;;  #ä¿®æ”¹ä¸ºany</span><br><span class="line"> 22 </span><br></pre></td></tr></table></figure>

<p>*å¦‚æœé…ç½®çš„æ˜¯chrootçš„ä¸»é…ç½®æ–‡ä»¶,è®°å¾—ç»™æƒé™(æœ¬æ–‡é…ç½®ä¸éœ€è¦)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chownnamed&#x2F;var&#x2F;named&#x2F;chroot&#x2F;etc&#x2F;named.conf</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®åŒºåŸŸæ–‡ä»¶"><a href="#é…ç½®åŒºåŸŸæ–‡ä»¶" class="headerlink" title="é…ç½®åŒºåŸŸæ–‡ä»¶"></a>é…ç½®åŒºåŸŸæ–‡ä»¶</h3><p>å…ˆå¤‡ä»½åŒºåŸŸé…ç½®çš„æ¨¡æ¿æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -p &#x2F;etc&#x2F;named.rfc1912.zones &#x2F;etc&#x2F;named.rfc1912.zones.bak        #-på‚æ•°å¯ä»¥ä¿å­˜æ–‡ä»¶åŸæ¥çš„å±æ€§</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤å…¶ä»–åŒºåŸŸ,åªç•™<strong>æ­£å‘</strong>å’Œ<strong>åå‘</strong>çš„å„ä¸€ä¸ªæ¨¡æ¿</p>
<p>é…ç½®å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;ljh.com&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.localhost&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;10.10.10.in-addr.arpa&quot; IN &#123;     #è¡¨ç¤º10.10.10.0ç½‘æ®µçš„åå‘è§£æåŒºåŸŸ</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.loopback&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®æ•°æ®æ–‡ä»¶"><a href="#é…ç½®æ•°æ®æ–‡ä»¶" class="headerlink" title="é…ç½®æ•°æ®æ–‡ä»¶"></a>é…ç½®æ•°æ®æ–‡ä»¶</h3><p>åŒæ ·ä¹Ÿæ˜¯è¦å¤‡ä»½å¥½æ¨¡æ¿æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -p named.localhost named.localhost.bak</span><br><span class="line">cp -p named.loopback named.loopback.bak</span><br></pre></td></tr></table></figure>

<p>æ­£å‘è§£ææ•°æ®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  ljh.com. mail.qq.com. ( #å‰é¢ä¸ºåŸŸ, åé¢ä¸ºç®¡ç†å‘˜é‚®ç®±(ä¸¤ä¸ªéƒ½è¦å†™ä¸Š), ä¸è¦å¿˜è®°åŸŸååé¢çš„ç‚¹</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns1.ljh.com.        #è¡¨ç¤ºæœ‰è¯¥åŸŸæœ‰ä¸¤ä¸ªåŸŸåæœåŠ¡å™¨, å…¶ä¸­ä¸€ä¸ªä¸åœ¨è¯¥åŸŸå†…</span><br><span class="line">        NS      ns1.ljh.net.</span><br><span class="line">ns1     A       10.10.10.12</span><br><span class="line">www     A       10.10.10.12</span><br><span class="line">        AAAA    ::1</span><br></pre></td></tr></table></figure>

<p>åå‘è§£ææ•°æ®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@       IN SOA  ljh.com. mail.qq.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns1.ljh.com.    # åŒæ ·ä¹Ÿè¦å†™ä¸ŠåŸŸåæœåŠ¡å™¨</span><br><span class="line">ns1     A       10.10.10.12</span><br><span class="line">        AAAA    ::1</span><br><span class="line">12      PTR     www.ljh.com.    # ä¸‰æ¡æŒ‡é’ˆè®°å½•</span><br><span class="line">12      PTR     ljh.com.</span><br><span class="line">20      PTR     bbs.ljh.com.</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨DNSæœåŠ¡å™¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@pxe named]# systemctl start named</span><br><span class="line">[root@pxe named]# netstat -antp | grep 53</span><br><span class="line">tcp        0      0 127.0.0.1:953           0.0.0.0:*               LISTEN      16444&#x2F;named         </span><br><span class="line">tcp        0      0 100.100.100.111:53      0.0.0.0:*               LISTEN      16444&#x2F;named         </span><br><span class="line">tcp        0      0 10.10.10.12:53          0.0.0.0:*               LISTEN      16444&#x2F;named         </span><br><span class="line">tcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN      16444&#x2F;named         </span><br><span class="line">tcp6       0      0 ::1:953                 :::*                    LISTEN      16444&#x2F;named         </span><br><span class="line">tcp6       0      0 ::1:53                  :::*                    LISTEN      16444&#x2F;named </span><br></pre></td></tr></table></figure>



<p>*<strong>æ³¨æ„</strong> æ•°æ®æ–‡ä»¶å†™åŸŸåçš„æ—¶å€™ä¸è¦å¿˜è®°åŸŸååé¢çš„ç‚¹</p>
<p>*å¯ä»¥ä½¿ç”¨bindåŸºæœ¬å‘½ä»¤é‡è½½ä¸»é…ç½®æ–‡ä»¶å’ŒåŒºåŸŸè§£æåº“æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@masternamed]#rndc reload</span><br><span class="line">[root@masternamed]#rndc reload ljh.com</span><br><span class="line">[root@masternamed]#rndc notify ljh.com</span><br><span class="line">[root@masternamed]#rndc reconfig</span><br></pre></td></tr></table></figure>



<h2 id="æµ‹è¯•DNSæœåŠ¡å™¨"><a href="#æµ‹è¯•DNSæœåŠ¡å™¨" class="headerlink" title="æµ‹è¯•DNSæœåŠ¡å™¨"></a>æµ‹è¯•DNSæœåŠ¡å™¨</h2><h3 id="æµ‹è¯•æœºé…ç½®"><a href="#æµ‹è¯•æœºé…ç½®" class="headerlink" title="æµ‹è¯•æœºé…ç½®"></a>æµ‹è¯•æœºé…ç½®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;resolv.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Generated by NetworkManager</span><br><span class="line">search localdomain</span><br><span class="line">nameserver 10.10.10.12    #ä¿®æ”¹ä¸ºDNSæœåŠ¡å™¨çš„åœ°å€</span><br></pre></td></tr></table></figure>

<h3 id="æ­£åå‘éªŒè¯"><a href="#æ­£åå‘éªŒè¯" class="headerlink" title="æ­£åå‘éªŒè¯"></a>æ­£åå‘éªŒè¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@pxe named]# nslookup www.ljh.com</span><br><span class="line">Server:         10.10.10.12</span><br><span class="line">Address:        10.10.10.12#53</span><br><span class="line"></span><br><span class="line">Name:   www.ljh.com</span><br><span class="line">Address: 10.10.10.12</span><br><span class="line">Name:   www.ljh.com</span><br><span class="line">Address: ::1</span><br><span class="line"></span><br><span class="line">[root@pxe named]# nslookup 10.10.10.12</span><br><span class="line">12.10.10.10.in-addr.arpa        name &#x3D; ljh.com.</span><br><span class="line">12.10.10.10.in-addr.arpa        name &#x3D; www.ljh.com.</span><br></pre></td></tr></table></figure>

<p>å¹²æ¯~ğŸº</p>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cobbliu/archive/2013/03/19/2970311.html">å¯¹æ•°æ®æ–‡ä»¶é…ç½®çš„è¯¦è§£</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ljh.xyz/2020/07/31/%E6%90%AD%E5%BB%BADNS%E6%9C%8D%E5%8A%A1%E5%99%A8/" data-id="ckkzd08ht000k7ou1211z0x0e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Centos/" rel="tag">Centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%BA%A7/" rel="tag">äº‘è®¡ç®—ä¸­çº§</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-å›¾åºŠè®¾ç½®" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/31/%E5%9B%BE%E5%BA%8A%E8%AE%BE%E7%BD%AE/" class="article-date">
  <time datetime="2020-07-31T03:24:18.000Z" itemprop="datePublished">2020-07-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/31/%E5%9B%BE%E5%BA%8A%E8%AE%BE%E7%BD%AE/">å›¾åºŠæµ‹è¯•</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="å›¾åºŠæµ‹è¯•"><a href="#å›¾åºŠæµ‹è¯•" class="headerlink" title="å›¾åºŠæµ‹è¯•"></a>å›¾åºŠæµ‹è¯•</h1><p><img src="http://img.ljh666.xyz/img/vino-li-DpaDxjOq2c4-unsplash.jpg" alt="test"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ljh.xyz/2020/07/31/%E5%9B%BE%E5%BA%8A%E8%AE%BE%E7%BD%AE/" data-id="ckkzd08hg000a7ou1g06f6gr3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Blog/" rel="tag">Blog</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-åœ¨Centosä¸Šå®‰è£…HEXOçš„æ•™ç¨‹" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/30/%E5%9C%A8Centos%E4%B8%8A%E5%AE%89%E8%A3%85HEXO%E7%9A%84%E6%95%99%E7%A8%8B/" class="article-date">
  <time datetime="2020-07-30T03:24:18.000Z" itemprop="datePublished">2020-07-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/30/%E5%9C%A8Centos%E4%B8%8A%E5%AE%89%E8%A3%85HEXO%E7%9A%84%E6%95%99%E7%A8%8B/">åœ¨Centosä¸Šå®‰è£…HEXOçš„è¯¦ç»†æ•™ç¨‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="åœ¨Centosä¸Šå®‰è£…HEXOçš„è¶…è¯¦ç»†æ•™ç¨‹-å°ç™½ä¹Ÿèƒ½ç”¨"><a href="#åœ¨Centosä¸Šå®‰è£…HEXOçš„è¶…è¯¦ç»†æ•™ç¨‹-å°ç™½ä¹Ÿèƒ½ç”¨" class="headerlink" title="åœ¨Centosä¸Šå®‰è£…HEXOçš„è¶…è¯¦ç»†æ•™ç¨‹ å°ç™½ä¹Ÿèƒ½ç”¨"></a>åœ¨Centosä¸Šå®‰è£…HEXOçš„è¶…è¯¦ç»†æ•™ç¨‹ å°ç™½ä¹Ÿèƒ½ç”¨</h1><h2 id="Hexoä»‹ç»"><a href="#Hexoä»‹ç»" class="headerlink" title="Hexoä»‹ç»"></a>Hexoä»‹ç»</h2><p>Hexo æ˜¯å°æ¹¾å›½äººå¼€å‘, å…·æœ‰Node.jså¸¦æ¥çš„è¶…å¿«ç”Ÿæˆé€Ÿåº¦, å‡ ç§’å†…å°±å¯ä»¥å®Œæˆç™¾ä¸ªé¡µé¢çš„æ¸²æŸ“, åŒæ—¶æ”¯æŒMarkdownæ–‡ä»¶, é€‚åˆå†™æŠ€æœ¯Blog</p>
<h2 id="å®‰è£…å‰æ"><a href="#å®‰è£…å‰æ" class="headerlink" title="å®‰è£…å‰æ"></a>å®‰è£…å‰æ</h2><ol>
<li>Node.js(å»ºè®®12.0åŠä»¥ä¸Š)</li>
<li>Git</li>
<li>é…ç½®å¥½yumçš„centos7æœåŠ¡å™¨</li>
</ol>
<h3 id="å®‰è£…Git-ç¡®ä¿é…ç½®å¥½äº†yumæº"><a href="#å®‰è£…Git-ç¡®ä¿é…ç½®å¥½äº†yumæº" class="headerlink" title="å®‰è£…Git(ç¡®ä¿é…ç½®å¥½äº†yumæº)"></a>å®‰è£…Git(ç¡®ä¿é…ç½®å¥½äº†yumæº)</h3><p>ä½¿ç”¨yumå®‰è£…<strong>git-core</strong> ä¼šæœ‰ç‚¹æ…¢</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install git-core</span><br></pre></td></tr></table></figure>

<p>é¡ºå¸¦å®‰è£…å¯èƒ½ç”¨åˆ°çš„å·¥å…·</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc gcc-c++ curl wget vim</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆè¦é¦–å…ˆè¦å®‰è£… gitï¼Ÿ å› ä¸º Hexo å¼€æºä¸”åŸºäº Node.js ç¯å¢ƒï¼Œæ‰€ä»¥å¤§é‡ä¸»é¢˜å’Œè®¾ç½®éœ€è¦é€šè¿‡ git å®Œæˆ</p>
<h3 id="Gitçš„cloneä¸‹è½½è¿‡æ…¢"><a href="#Gitçš„cloneä¸‹è½½è¿‡æ…¢" class="headerlink" title="Gitçš„cloneä¸‹è½½è¿‡æ…¢"></a>Gitçš„cloneä¸‹è½½è¿‡æ…¢</h3><p>åé¢ä¸€ä¸‹æ“ä½œéœ€è¦ç”¨åˆ°cloneå‘½ä»¤, å¯ä»¥é€šè¿‡ä¿®æ”¹/etc/hostsæ–‡ä»¶æ¥æé«˜ä¸€ç‚¹ä¸‹è½½é€Ÿåº¦(ä¹Ÿåªæœ‰å‡ åkbğŸ˜©), ç›®å‰æµ‹è¯•æœ‰æ•ˆ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Github</span></span><br><span class="line">204.232.175.78 http://documentcloud.github.com</span><br><span class="line">207.97.227.239 http://github.com</span><br><span class="line">204.232.175.94 http://gist.github.com</span><br><span class="line">107.21.116.220 http://help.github.com</span><br><span class="line">207.97.227.252 http://nodeload.github.com</span><br><span class="line">199.27.76.130 http://raw.github.com</span><br><span class="line">107.22.3.110 http://status.github.com</span><br><span class="line">204.232.175.78 http://training.github.com</span><br><span class="line">207.97.227.243 http://www.github.com</span><br><span class="line">207.97.227.243 https://www.github.com</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…Node-js-å¿…è£…"><a href="#å®‰è£…Node-js-å¿…è£…" class="headerlink" title="å®‰è£…Node.js(å¿…è£…)"></a>å®‰è£…Node.js(å¿…è£…)</h3><h4 id="å®‰è£…å‰çš„çŸ¥è¯†è¡¥å……"><a href="#å®‰è£…å‰çš„çŸ¥è¯†è¡¥å……" class="headerlink" title="å®‰è£…å‰çš„çŸ¥è¯†è¡¥å……"></a>å®‰è£…å‰çš„çŸ¥è¯†è¡¥å……</h4><p>Node.jså°±æ˜¯JavaScriptçš„è¿è¡Œç¯å¢ƒ, ç±»ä¼¼äºjavaçš„è¿è¡Œç¯å¢ƒjdk</p>
<p>nvmæ˜¯Node.jsçš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·</p>
<p>npmæ˜¯Node.jsçš„åŒ…ç®¡ç†å·¥å…·(ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¼€æºçš„cnpmå·¥å…·)</p>
<p>é™„: æ·˜å®çš„Node.jsä¸‹è½½åº“åœ°å€(æœ¬æ–‡ä¸éœ€è¦ç”¨åˆ°)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://npm.taobao.org/mirrors/node/</span><br></pre></td></tr></table></figure>

<h4 id="å¼€å§‹å®‰è£…"><a href="#å¼€å§‹å®‰è£…" class="headerlink" title="å¼€å§‹å®‰è£…"></a>å¼€å§‹å®‰è£…</h4><p>è¿™é‡Œæˆ‘ä½¿ç”¨nvmæ¥å®‰è£…node.js</p>
<p>ç¬¬ä¸€æ­¥,ä¸‹è½½nvmæ§åˆ¶å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/cnpm/nvm.git  # å…‹éš†nvmåº“åˆ°æœ¬åœ°</span><br><span class="line">cd nvm   # è¿›å…¥nvmç›®å½•</span><br><span class="line">sh ./install.sh  # å®‰è£…nvm</span><br><span class="line">source $HOME/nvm/nvm.sh   # åŠ è½½nvmçš„è¿è¡Œç¯å¢ƒ, å¦‚æœä¸åŠ è½½,åé¢çš„å‘½ä»¤å°±æ— æ³•ä½¿ç”¨,åé¢ä¼šæ•™ä½ æ€ä¹ˆæ ·ä¸ç”¨æ¯æ¬¡éƒ½åŠ è½½ä¸€é</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒéƒ¨, ç”¨nvmä¸‹è½½node.js</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nvm ls-remote    # æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬çš„å‘½ä»¤</span><br><span class="line">nvm install v12.0.0   #å®‰è£… 12.0.0ç‰ˆæœ¬çš„node.js</span><br><span class="line">nvm use v12.0.0     #é€‰æ‹©ä½¿ç”¨åˆšæ‰å®‰è£…çš„ç‰ˆæœ¬</span><br></pre></td></tr></table></figure>

<h2 id="å®‰è£…Hexo"><a href="#å®‰è£…Hexo" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h2><p>npmæ˜¯éšåŒNodeJSä¸€èµ·å®‰è£…çš„, æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo --save  # å®‰è£…hexoæ¨¡å—</span><br></pre></td></tr></table></figure>



<p>â€“saveã€-Så‚æ•°æ„æ€æ˜¯æŠŠæ¨¡å—çš„ç‰ˆæœ¬ä¿¡æ¯ä¿å­˜åˆ°dependenciesï¼ˆç”Ÿäº§ç¯å¢ƒä¾èµ–ï¼‰ä¸­ï¼Œå³ä½ çš„package.jsonæ–‡ä»¶çš„dependencieså­—æ®µä¸­</p>
<p>-g å…¨å±€å®‰è£…</p>
<p>æœ¬åœ°å®‰è£…</p>
<ol>
<li>å°†å®‰è£…åŒ…æ”¾åœ¨ ./node_modules ä¸‹ï¼ˆè¿è¡Œ npm å‘½ä»¤æ—¶æ‰€åœ¨çš„ç›®å½•ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ node_modules ç›®å½•ï¼Œä¼šåœ¨å½“å‰æ‰§è¡Œ npm å‘½ä»¤çš„ç›®å½•ä¸‹ç”Ÿæˆ node_modules ç›®å½•ã€‚</li>
<li>å¯ä»¥é€šè¿‡ require() æ¥å¼•å…¥æœ¬åœ°å®‰è£…çš„åŒ…ã€‚</li>
</ol>
<p>å…¨å±€å®‰è£…</p>
<ol>
<li>å°†å®‰è£…åŒ…æ”¾åœ¨ /usr/local ä¸‹æˆ–è€…ä½  node çš„å®‰è£…ç›®å½•ã€‚</li>
<li>å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ã€‚</li>
</ol>
<p>éƒ¨ç½²hexo</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/wwwroot    # åˆ›å»ºç”¨æ¥å­˜å‚¨hexoç”Ÿæˆçš„ç½‘ç«™çš„æ–‡ä»¶å¤¹</span><br><span class="line">hexo init /home/wwwroot  # åˆå§‹åŒ–æ–‡ä»¶å¤¹</span><br></pre></td></tr></table></figure>

<p>é…ç½®hexo</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /home/wwwroot</span><br><span class="line">ls</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°hexoäº§ç”Ÿçš„æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost wwwroot]# ls</span><br><span class="line">_config.yml   package.json       scaffolds  themes</span><br><span class="line">node_modules  package-lock.json  source</span><br></pre></td></tr></table></figure>

<p>å‡ ä¸ªé‡è¦æ–‡ä»¶:</p>
<ul>
<li>_config.ymlé…ç½®æ–‡ä»¶</li>
<li>themesä¸»é¢˜æ–‡ä»¶å¤¹</li>
<li>sourceå­˜æ”¾ç½‘ç«™ç´ æçš„åœ°æ–¹</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim _config.yml  #ç¼–è¾‘é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<p>è‡³äºé…ç½®æ–‡ä»¶ä¸­æ¯ä¸ªé…ç½®é¡¹ç›®çš„æ„æ€å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/configuration">https://hexo.io/zh-cn/docs/configuration</a></p>
<blockquote>
<p><strong>ç½‘ç«™é¡¹</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>title</code></td>
<td align="left">ç½‘ç«™æ ‡é¢˜</td>
</tr>
<tr>
<td align="left"><code>subtitle</code></td>
<td align="left">ç½‘ç«™å‰¯æ ‡é¢˜</td>
</tr>
<tr>
<td align="left"><code>description</code></td>
<td align="left">ç½‘ç«™æè¿°</td>
</tr>
<tr>
<td align="left"><code>keywords</code></td>
<td align="left">ç½‘ç«™çš„å…³é”®è¯ã€‚æ”¯æ´å¤šä¸ªå…³é”®è¯ã€‚</td>
</tr>
<tr>
<td align="left"><code>author</code></td>
<td align="left">æ‚¨çš„åå­—</td>
</tr>
<tr>
<td align="left"><code>language</code></td>
<td align="left">ç½‘ç«™ä½¿ç”¨çš„è¯­è¨€ã€‚å¯¹äºç®€ä½“ä¸­æ–‡ç”¨æˆ·æ¥è¯´ï¼Œä½¿ç”¨ä¸åŒçš„ä¸»é¢˜å¯èƒ½éœ€è¦è®¾ç½®æˆä¸åŒçš„å€¼ï¼Œè¯·å‚è€ƒä½ çš„<strong>ä¸»é¢˜çš„æ–‡æ¡£</strong>è‡ªè¡Œè®¾ç½®ï¼Œå¸¸è§çš„æœ‰ <code>zh-Hans</code>å’Œ <code>zh-CN</code>ã€‚</td>
</tr>
<tr>
<td align="left"><code>timezone</code></td>
<td align="left">ç½‘ç«™æ—¶åŒºã€‚Hexo é»˜è®¤ä½¿ç”¨æ‚¨ç”µè„‘çš„æ—¶åŒºã€‚è¯·å‚è€ƒ <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">æ—¶åŒºåˆ—è¡¨</a> è¿›è¡Œè®¾ç½®ï¼Œå¦‚ <code>America/New_York</code>, <code>Japan</code>, å’Œ <code>UTC</code> ã€‚ä¸€èˆ¬çš„ï¼Œå¯¹äºä¸­å›½å¤§é™†åœ°åŒºå¯ä»¥ä½¿ç”¨ <code>Asia/Shanghai</code>ã€‚</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>ç½‘å€é¡¹</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æè¿°</th>
<th align="left">é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>url</code></td>
<td align="left">ç½‘å€</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>root</code></td>
<td align="left">ç½‘ç«™æ ¹ç›®å½•</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>permalink</code></td>
<td align="left">æ–‡ç« çš„ <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/permalinks">æ°¸ä¹…é“¾æ¥</a> æ ¼å¼</td>
<td align="left"><code>:year/:month/:day/:title/</code></td>
</tr>
<tr>
<td align="left"><code>permalink_defaults</code></td>
<td align="left">æ°¸ä¹…é“¾æ¥ä¸­å„éƒ¨åˆ†çš„é»˜è®¤å€¼</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>pretty_urls</code></td>
<td align="left">æ”¹å†™ <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/variables"><code>permalink</code></a> çš„å€¼æ¥ç¾åŒ– URL</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>pretty_urls.trailing_index</code></td>
<td align="left">æ˜¯å¦åœ¨æ°¸ä¹…é“¾æ¥ä¸­ä¿ç•™å°¾éƒ¨çš„ <code>index.html</code>ï¼Œè®¾ç½®ä¸º <code>false</code> æ—¶å»é™¤</td>
<td align="left"><code>true</code></td>
</tr>
<tr>
<td align="left"><code>pretty_urls.trailing_html</code></td>
<td align="left">æ˜¯å¦åœ¨æ°¸ä¹…é“¾æ¥ä¸­ä¿ç•™å°¾éƒ¨çš„ <code>.html</code>, è®¾ç½®ä¸º <code>false</code> æ—¶å»é™¤ (<em>å¯¹å°¾éƒ¨çš„ <code>index.html</code>æ— æ•ˆ</em>)</td>
<td align="left"><code>true</code></td>
</tr>
</tbody></table>
<h2 id="ä¿®æ”¹hexoä¸»é¢˜"><a href="#ä¿®æ”¹hexoä¸»é¢˜" class="headerlink" title="ä¿®æ”¹hexoä¸»é¢˜"></a>ä¿®æ”¹hexoä¸»é¢˜</h2><blockquote>
<p>è¿™é‡Œç”¨fluidä¸»é¢˜ä¸¾ä¾‹å­</p>
</blockquote>
<p>fluidä¸»é¢˜çš„gitåœ°å€:<a target="_blank" rel="noopener" href="https://github.com/fluid-dev/hexo-theme-fluid">https://github.com/fluid-dev/hexo-theme-fluid</a></p>
<p>ä¸‹è½½ä¸»é¢˜(ç½‘ç»œåŸå› ,è¿™ä¸ªæ—¶é—´å¯èƒ½ä¼šæœ‰ç‚¹é•¿âŒ›)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home/wwwroot/themes            # è¿›å…¥ä¸»é¢˜ç›®å½•</span><br><span class="line">git clone https://github.com/fluid-dev/hexo-theme-fluid fluid                                                               #  å…‹éš†ä¸»é¢˜åº“å¹¶ä¸”æ”¹åä¸ºfluid</span><br><span class="line">ls                              # æŸ¥çœ‹ä¸‹è½½çš„ä¸»é¢˜</span><br></pre></td></tr></table></figure>

<p>å¼•ç”¨ä¸»é¢˜</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /home/wwwroot/_config.xml    #ä¿®æ”¹é»˜è®¤ä¸»é¢˜ä¸ºfluid</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> 85 updated_option: &#x27;mtime&#x27;</span><br><span class="line"> 86 </span><br><span class="line"> 87 # Pagination</span><br><span class="line"> 88 ## Set per_page to 0 to disable pagination</span><br><span class="line"> 89 per_page: 10</span><br><span class="line"> 90 pagination_dir: page</span><br><span class="line"> 91 </span><br><span class="line"> 92 # Include / Exclude file(s)</span><br><span class="line"> 93 ## include:/exclude: options only apply to the &#x27;source/&#x27; folder</span><br><span class="line"> 94 include:</span><br><span class="line"> 95 exclude:</span><br><span class="line"> 96 ignore:</span><br><span class="line"> 97 </span><br><span class="line"> 98 # Extensions</span><br><span class="line"> 99 ## Plugins: https://hexo.io/plugins/</span><br><span class="line">100 ## Themes: https://hexo.io/themes/</span><br><span class="line">101 theme: fluid    #ä¿®æ”¹ä¸ºæˆ‘ä»¬å…‹éš†çš„ä¸»é¢˜çš„æ–‡ä»¶å¤¹åå­—</span><br><span class="line">102 </span><br><span class="line">103 # Deployment</span><br><span class="line">104 ## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">105 deploy:</span><br><span class="line">106   type: &#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>æŒ‰ä¸€ä¸‹esc,åœ¨è¾“å…¥:å,è¾“å…¥wq,å›è½¦,å³å¯ä¿å­˜å¹¶é€€å‡º</p>
<h2 id="å¯åŠ¨Hexo"><a href="#å¯åŠ¨Hexo" class="headerlink" title="å¯åŠ¨Hexo"></a>å¯åŠ¨Hexo</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;This is a test page&quot; # æ–°å»ºä¸€ä¸ªç½‘é¡µé¡µé¢,ä¼šåœ¨/home/wwwroot/source/_posts/ä¸­ç”Ÿæˆå¯¹åº”mdæ–‡ä»¶, ä½ å¯ä»¥è‡ªå·±åœ¨å…¶ä¸­ä¹¦å†™å†…å®¹</span><br><span class="line">hexo g      #ä½¿ç”¨hexoç”Ÿæˆç½‘é¡µ</span><br><span class="line">hexo c      #æ¸…é™¤hexoçš„é…ç½®(å¸¸ç”¨åœ¨ä¿®æ”¹ä¸»é¢˜,ç½‘ç«™é…ç½®å, ä¿®æ”¹ç½‘é¡µå†…å®¹ä¸€èˆ¬ä¸ç”¨)</span><br></pre></td></tr></table></figure>

<p>æˆ‘é€šå¸¸çš„é€šè¿‡ä¸Šä¼ mdæ–‡ä»¶, å†ç”¨hexo gå‘½ä»¤é‡æ–°ç”Ÿæˆé¡µé¢æ¥å®ç°æ–‡ç« çš„ä¸Šä¼ </p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹hexo new â€œThis is a test pageâ€ç”Ÿæˆçš„mdæ–‡ä»¶å†…å®¹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost themes]# cat /home/wwwroot/source/_posts/test.md</span><br><span class="line">---</span><br><span class="line">title: test</span><br><span class="line">date: 2020-07-30 18:52:31</span><br><span class="line">tags:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥, æˆ‘ä»¬åªè¦åœ¨å†™mdçš„æ—¶å€™åŠ å…¥ä¸Šé¢çš„å¤´éƒ¨æ ¼å¼å°±å¯ä»¥äº†</p>
<h2 id="ä½¿ç”¨nginxå‘å¸ƒHexoç”Ÿæˆçš„ç½‘é¡µ"><a href="#ä½¿ç”¨nginxå‘å¸ƒHexoç”Ÿæˆçš„ç½‘é¡µ" class="headerlink" title="ä½¿ç”¨nginxå‘å¸ƒHexoç”Ÿæˆçš„ç½‘é¡µ"></a>ä½¿ç”¨nginxå‘å¸ƒHexoç”Ÿæˆçš„ç½‘é¡µ</h2><p>å‰é¢æˆ‘ä»¬å·²ç»ä½¿ç”¨Hexoç”Ÿæˆäº†é™æ€ç½‘é¡µ</p>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦å°†å®ƒå‘å¸ƒåˆ°ç½‘ä¸Š,  è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯nginxæœåŠ¡å™¨, ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨apacheæœåŠ¡å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install nginx</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬ä¿®æ”¹nginxæœåŠ¡å™¨çš„ç½‘ç«™æ ¹ç›®å½•ä¸º/home/wwwroot/public</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf    #ä¸åŒç‰ˆæœ¬çš„nignxä¸»é…ç½®æ–‡ä»¶ä½ç½®å¯èƒ½ä¸åŒ</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">31     default_type        application/octet-stream;</span><br><span class="line">32 </span><br><span class="line">33     # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class="line">34     # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class="line">35     # for more information.</span><br><span class="line">36     include /etc/nginx/conf.d/*.conf;</span><br><span class="line">37 </span><br><span class="line">38     server &#123;</span><br><span class="line">39         listen       80 default_server;</span><br><span class="line">40         listen       [::]:80 default_server;</span><br><span class="line">41         server_name  _;</span><br><span class="line">42         root         /home/wwwroot/public/;   #ä¿®æ”¹è¿™é‡Œ</span><br><span class="line">43 </span><br><span class="line">44         # Load configuration files for the default server block.</span><br><span class="line">45         include /etc/nginx/default.d/*.conf;</span><br><span class="line">46 </span><br><span class="line">47         location / &#123;</span><br><span class="line">48         &#125;</span><br><span class="line">49 </span><br><span class="line">50         error_page 404 /404.html;</span><br><span class="line">51             location = /40x.html &#123;</span><br><span class="line">52         &#125;</span><br><span class="line">53 </span><br></pre></td></tr></table></figure>

<p>æŒ‰ä¸€ä¸‹esc,åœ¨è¾“å…¥:å,è¾“å…¥wq,å›è½¦,å³å¯ä¿å­˜å¹¶é€€å‡º</p>
<p><strong>ä¸‹é¢æ˜¯é‡ç‚¹å†…å®¹:</strong></p>
<p>è¦æƒ³nginxè¢«å¤–ç½‘è®¿é—®éœ€è¦å…³é—­firewalldé˜²ç«å¢™, å…³é—­selinux(æœ‰äº›æœåŠ¡å™¨å‚å•†ä¸€èˆ¬é»˜è®¤å…³é—­), å¦‚æœä½ è´­ä¹°çš„æ˜¯é˜¿é‡Œäº‘è¿™äº›æœåŠ¡å™¨, éœ€è¦è®¾ç½®é˜¿é‡Œäº‘è‡ªå·±çš„é˜²ç«å¢™, å¼€æ”¾å…¶ä¸­çš„80ç«¯å£, å¦åˆ™æ— æ³•è¢«è®¿é—®åˆ°</p>
<p>å…³é—­firewalldå¹¶æ¸…ç©ºé˜²ç«å¢™è§„åˆ™</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">iptables -F</span><br><span class="line">iptables -X</span><br><span class="line">iptables -Z</span><br></pre></td></tr></table></figure>

<p>å…³é—­selinux</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0 </span><br></pre></td></tr></table></figure>

<p>æ°¸ä¹…å…³é—­è¦ä¿®æ”¹æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/selinux</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> 1 </span><br><span class="line"> 2 # This file controls the state of SELinux on the system.</span><br><span class="line"> 3 # SELINUX= can take one of these three values:</span><br><span class="line"> 4 #     enforcing - SELinux security policy is enforced.</span><br><span class="line"> 5 #     permissive - SELinux prints warnings instead of enforcing.</span><br><span class="line"> 6 #     disabled - No SELinux policy is loaded.</span><br><span class="line"> 7 SELINUX=disabled   #ä¿®æ”¹ä¸ºdisabled,é‡å¯æœ‰æ•ˆ</span><br><span class="line"> 8 # SELINUXTYPE= can take one of three values:</span><br><span class="line"> 9 #     targeted - Targeted processes are protected,</span><br><span class="line">10 #     minimum - Modification of targeted policy. Only selected processes are protected. </span><br><span class="line">11 #     mls - Multi Level Security protection.</span><br><span class="line">12 SELINUXTYPE=targeted</span><br><span class="line">13 </span><br><span class="line">14 </span><br></pre></td></tr></table></figure>

<p>å¥½äº†,ç°åœ¨å¯åŠ¨nginx</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ipåœ°å€æˆ–è€…åŸŸåå°±å¯ä»¥è®¿é—®åˆ°ä½ çš„Blogç½‘ç«™å•¦</p>
<p><img src="https://i.loli.net/2020/07/30/Q4yT96aFzpYwrRs.png" alt="hexoå®‰è£…æˆåŠŸ"></p>
<h2 id="è‡³æ­¤-Hexoå·²ç»å®‰è£…å®Œæˆ-äº«å—Hexoå§"><a href="#è‡³æ­¤-Hexoå·²ç»å®‰è£…å®Œæˆ-äº«å—Hexoå§" class="headerlink" title="è‡³æ­¤, Hexoå·²ç»å®‰è£…å®Œæˆ,äº«å—Hexoå§"></a>è‡³æ­¤, Hexoå·²ç»å®‰è£…å®Œæˆ,äº«å—Hexoå§</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ljh.xyz/2020/07/30/%E5%9C%A8Centos%E4%B8%8A%E5%AE%89%E8%A3%85HEXO%E7%9A%84%E6%95%99%E7%A8%8B/" data-id="ckkzd08hh000c7ou11qrr03zc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Blog/" rel="tag">Blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Centos/" rel="tag">Centos</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&amp;laquo; ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">ä¸‹ä¸€é¡µ &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/" rel="tag">Blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CTF/" rel="tag">CTF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos/" rel="tag">Centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ceph/" rel="tag">Ceph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker-Compose/" rel="tag">Docker-Compose</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LNMP/" rel="tag">LNMP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openssl/" rel="tag">openssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openstack/" rel="tag">openstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordpress/" rel="tag">wordpress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yum%E6%BA%90/" rel="tag">yumæº</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%BA%A7/" rel="tag">äº‘è®¡ç®—ä¸­çº§</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%88%9D%E7%BA%A7/" rel="tag">äº‘è®¡ç®—åˆçº§</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/" rel="tag">åˆ†å¸ƒå¼å­˜å‚¨</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2/" rel="tag">åšå®¢</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%91%BD%E4%BB%A4%E8%A7%A3%E6%9E%90/" rel="tag">å‘½ä»¤è§£æ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92/" rel="tag">å®¹å™¨ç¼–æ’</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%86%E9%92%A5/" rel="tag">å¯†é’¥</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%81%E6%9C%89%E4%BA%91/" rel="tag">ç§æœ‰äº‘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%86%E9%A2%91/" rel="tag">è§†é¢‘</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget tagcloud">
      <a href="/tags/Blog/" style="font-size: 12.5px;">Blog</a> <a href="/tags/CTF/" style="font-size: 10px;">CTF</a> <a href="/tags/Centos/" style="font-size: 20px;">Centos</a> <a href="/tags/Ceph/" style="font-size: 10px;">Ceph</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Docker-Compose/" style="font-size: 10px;">Docker-Compose</a> <a href="/tags/LNMP/" style="font-size: 10px;">LNMP</a> <a href="/tags/Linux/" style="font-size: 17.5px;">Linux</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/docker/" style="font-size: 12.5px;">docker</a> <a href="/tags/openssl/" style="font-size: 10px;">openssl</a> <a href="/tags/openstack/" style="font-size: 12.5px;">openstack</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/wordpress/" style="font-size: 10px;">wordpress</a> <a href="/tags/yum%E6%BA%90/" style="font-size: 10px;">yumæº</a> <a href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%BA%A7/" style="font-size: 15px;">äº‘è®¡ç®—ä¸­çº§</a> <a href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%88%9D%E7%BA%A7/" style="font-size: 10px;">äº‘è®¡ç®—åˆçº§</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/" style="font-size: 12.5px;">åˆ†å¸ƒå¼å­˜å‚¨</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">åšå®¢</a> <a href="/tags/%E5%91%BD%E4%BB%A4%E8%A7%A3%E6%9E%90/" style="font-size: 10px;">å‘½ä»¤è§£æ</a> <a href="/tags/%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92/" style="font-size: 10px;">å®¹å™¨ç¼–æ’</a> <a href="/tags/%E5%AF%86%E9%92%A5/" style="font-size: 10px;">å¯†é’¥</a> <a href="/tags/%E7%A7%81%E6%9C%89%E4%BA%91/" style="font-size: 12.5px;">ç§æœ‰äº‘</a> <a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 10px;">è§†é¢‘</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">åä¸€æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">ä¹æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">å…«æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">ä¸ƒæœˆ 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/11/01/%E7%94%A8Python%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%A4%E4%BA%92%E5%BC%8FSSH%E5%AE%A2%E6%88%B7%E7%AB%AF/">ç”¨Pythonå†™ä¸€ä¸ªç®€å•çš„äº¤äº’å¼SSHå®¢æˆ·ç«¯</a>
          </li>
        
          <li>
            <a href="/2020/09/21/LNMP%E6%90%AD%E5%BB%BA%E4%B8%8E%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E9%83%A8%E7%BD%B2/">LNMPæ­å»ºä¸ä¸ªäººåšå®¢çš„éƒ¨ç½²</a>
          </li>
        
          <li>
            <a href="/2020/08/23/%E8%A7%86%E9%A2%91%E6%B5%8B%E8%AF%95/">è§†é¢‘æµ‹è¯•</a>
          </li>
        
          <li>
            <a href="/2020/08/21/Docker%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%5BDocker%20compose%5D/">Dockerå®¹å™¨ç¼–æ’[Docker compose]</a>
          </li>
        
          <li>
            <a href="/2020/08/20/%E9%85%8D%E7%BD%AE%E5%9B%BD%E5%86%85yum%E6%BA%90/">é…ç½®å›½å†…çš„yumæº</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 LJH<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>